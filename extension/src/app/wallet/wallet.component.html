<div class="zelf-card wallet" *transloco="let t">
    <div class="wallet__header">
        <div class="wallet__col1">
            <button mat-flat-button class="zelf-icon-button zelf-icon-button--40 zelf-icon-button--anti-flash-white" [routerLink]="['/home']">
                <svg width="22" height="14" viewBox="0 0 22 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M20.0898 5.8277H4.72478L8.08478 2.4677C8.53978 2.0127 8.53978 1.2777 8.08478 0.822695C7.62978 0.367695 6.89478 0.367695 6.43978 0.822695L1.08478 6.1777C0.62978 6.6327 0.62978 7.3677 1.08478 7.8227L6.43978 13.1777C6.89478 13.6327 7.62978 13.6327 8.08478 13.1777C8.53978 12.7227 8.53978 11.9877 8.08478 11.5327L4.72478 8.16103H20.0898C20.7314 8.16103 21.2564 7.63603 21.2564 6.99436C21.2564 6.3527 20.7314 5.8277 20.0898 5.8277Z"
                    />
                </svg>
            </button>
        </div>

        <div class="wallet__col2">
            <p class="wallet__title">{{ t("common.zelf_wallet") }}</p>
        </div>

        <div class="wallet__col3">
            <button (click)="openInfoSheet()" mat-flat-button class="zelf-icon-button zelf-icon-button--40 zelf-icon-button--anti-flash-white">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M10.8334 6.16732H13.1667V8.50065H10.8334V6.16732ZM10.8334 10.834H13.1667V17.834H10.8334V10.834ZM12 0.333984C5.56004 0.333984 0.333374 5.56065 0.333374 12.0007C0.333374 18.4407 5.56004 23.6673 12 23.6673C18.44 23.6673 23.6667 18.4407 23.6667 12.0007C23.6667 5.56065 18.44 0.333984 12 0.333984ZM12 21.334C6.85504 21.334 2.66671 17.1457 2.66671 12.0007C2.66671 6.85565 6.85504 2.66732 12 2.66732C17.145 2.66732 21.3334 6.85565 21.3334 12.0007C21.3334 17.1457 17.145 21.334 12 21.334Z"
                    />
                </svg>
            </button>
        </div>
    </div>

    <div class="zelf-card__content wallet__content">
        <ng-container *ngIf="!loading">
            <div class="qr-code">
                <img class="qr-code__image" [src]="wallet.image" />
            </div>

            <div
                class="wallet__status-chip"
                [ngClass]="{
                    'wallet__status-chip--active': getWalletStatus() === 'active',
                    'wallet__status-chip--hold': !wallet.publicData?.isExpired && wallet.publicData?.type === 'hold',
                    'wallet__status-chip--inactive': wallet.publicData?.isExpired,
                }"
            >
                {{ t("wallet_status." + getWalletStatus()) }}
            </div>

            <h4 class="wallet__name">{{ wallet.publicData?.zelfName | zelfName: 18 }}</h4>

            <div class="wallet__tasks">
                <button class="wallet__task-button" (click)="downloadQRCode()">
                    <div class="wallet__task-button-content">
                        <svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M14.355 7.08398H12.5V1.25065C12.5 0.608984 11.975 0.0839844 11.3334 0.0839844H6.66671C6.02504 0.0839844 5.50004 0.608984 5.50004 1.25065V7.08398H3.64504C2.60671 7.08398 2.08171 8.34398 2.81671 9.07898L8.17171 14.434C8.62671 14.889 9.36171 14.889 9.81671 14.434L15.1717 9.07898C15.9067 8.34398 15.3934 7.08398 14.355 7.08398ZM0.833374 18.7507C0.833374 19.3923 1.35837 19.9173 2.00004 19.9173H16C16.6417 19.9173 17.1667 19.3923 17.1667 18.7507C17.1667 18.109 16.6417 17.584 16 17.584H2.00004C1.35837 17.584 0.833374 18.109 0.833374 18.7507Z"
                            />
                        </svg>
                        <span>{{ t("wallet.download_qr") }}</span>
                    </div>
                </button>

                <button class="wallet__task-button" (click)="openPrivateKeyBottomSheet()">
                    <div class="wallet__task-button-content">
                        <svg width="20" height="26" viewBox="0 0 20 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M17 8.91667H15.8333V6.58333C15.8333 3.36333 13.22 0.75 9.99996 0.75C6.77996 0.75 4.16663 3.36333 4.16663 6.58333V8.91667H2.99996C1.71663 8.91667 0.666626 9.96667 0.666626 11.25V22.9167C0.666626 24.2 1.71663 25.25 2.99996 25.25H17C18.2833 25.25 19.3333 24.2 19.3333 22.9167V11.25C19.3333 9.96667 18.2833 8.91667 17 8.91667ZM9.99996 19.4167C8.71663 19.4167 7.66663 18.3667 7.66663 17.0833C7.66663 15.8 8.71663 14.75 9.99996 14.75C11.2833 14.75 12.3333 15.8 12.3333 17.0833C12.3333 18.3667 11.2833 19.4167 9.99996 19.4167ZM6.49996 8.91667V6.58333C6.49996 4.64667 8.06329 3.08333 9.99996 3.08333C11.9366 3.08333 13.5 4.64667 13.5 6.58333V8.91667H6.49996Z"
                            />
                        </svg>
                        <span>{{ t("wallet.private_key") }}</span>
                    </div>
                </button>

                <button class="wallet__task-button" *ngIf="showArnsButton" (click)="openMyArnsBottomSheet()">
                    <div class="wallet__task-button-content">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M11.9884 0.333984C5.54837 0.333984 0.333374 5.56065 0.333374 12.0007C0.333374 18.4407 5.54837 23.6673 11.9884 23.6673C18.44 23.6673 23.6667 18.4407 23.6667 12.0007C23.6667 5.56065 18.44 0.333984 11.9884 0.333984ZM20.0734 7.33398H16.6317C16.2584 5.87565 15.7217 4.47565 15.0217 3.18065C17.1684 3.91565 18.9534 5.40898 20.0734 7.33398ZM12 2.71398C12.9684 4.11398 13.7267 5.66565 14.2284 7.33398H9.77171C10.2734 5.66565 11.0317 4.11398 12 2.71398ZM2.97004 14.334C2.78337 13.5873 2.66671 12.8057 2.66671 12.0007C2.66671 11.1957 2.78337 10.414 2.97004 9.66732H6.91337C6.82004 10.4373 6.75004 11.2073 6.75004 12.0007C6.75004 12.794 6.82004 13.564 6.91337 14.334H2.97004ZM3.92671 16.6673H7.36837C7.74171 18.1257 8.27837 19.5256 8.97837 20.8206C6.83171 20.0856 5.04671 18.604 3.92671 16.6673ZM7.36837 7.33398H3.92671C5.04671 5.39732 6.83171 3.91565 8.97837 3.18065C8.27837 4.47565 7.74171 5.87565 7.36837 7.33398ZM12 21.2873C11.0317 19.8873 10.2734 18.3357 9.77171 16.6673H14.2284C13.7267 18.3357 12.9684 19.8873 12 21.2873ZM14.73 14.334H9.27004C9.16504 13.564 9.08337 12.794 9.08337 12.0007C9.08337 11.2073 9.16504 10.4257 9.27004 9.66732H14.73C14.835 10.4257 14.9167 11.2073 14.9167 12.0007C14.9167 12.794 14.835 13.564 14.73 14.334ZM15.0217 20.8206C15.7217 19.5256 16.2584 18.1257 16.6317 16.6673H20.0734C18.9534 18.5923 17.1684 20.0856 15.0217 20.8206ZM17.0867 14.334C17.18 13.564 17.25 12.794 17.25 12.0007C17.25 11.2073 17.18 10.4373 17.0867 9.66732H21.03C21.2167 10.414 21.3334 11.1957 21.3334 12.0007C21.3334 12.8057 21.2167 13.5873 21.03 14.334H17.0867Z"
                            />
                        </svg>
                        <span>{{ t("common.my_arns") }}</span>
                    </div>
                </button>
            </div>

            <div class="wallet__tabs">
                <div class="animated-tabs">
                    <div
                        class="animated-tabs__switch"
                        [ngClass]="{
                            'animated-tabs__switch--left': selectedTab === 'addresses',
                            'animated-tabs__switch--right': selectedTab === 'info',
                        }"
                    >
                        <div
                            (click)="selectTab('addresses')"
                            [ngClass]="{ 'animated-tab--active': selectedTab === 'addresses' }"
                            class="animated-tab"
                        >
                            <span>{{ t("wallet.addresses") }}</span>
                        </div>

                        <div (click)="selectTab('info')" [ngClass]="{ 'animated-tab--active': selectedTab === 'info' }" class="animated-tab">
                            <span>{{ t("wallet.info") }}</span>
                        </div>
                    </div>
                </div>

                <div class="wallet__tab-content" *ngIf="selectedTab === 'addresses'">
                    <div class="wallet__addresses">
                        <div class="crypto-address">
                            <div class="crypto-address__col">
                                <p class="crypto-address__text">Ethereum</p>
                                <p class="crypto-address__address-text">{{ wallet.publicData?.ethAddress }}</p>
                            </div>

                            <button
                                class="zelf-icon-button zelf-icon-button--40 zelf-icon-button--anti-flash-white zelf-icon-button--border-soft"
                                (click)="copyToClipboard(wallet.ethAddress || '')"
                            >
                                <ng-container *ngTemplateOutlet="clipboardIcon"></ng-container>
                            </button>
                        </div>

                        <div class="crypto-address">
                            <div class="crypto-address__col">
                                <p class="crypto-address__text">Solana</p>
                                <p class="crypto-address__address-text">{{ wallet.publicData?.solanaAddress }}</p>
                            </div>

                            <button
                                class="zelf-icon-button zelf-icon-button--40 zelf-icon-button--anti-flash-white zelf-icon-button--border-soft"
                                (click)="copyToClipboard(wallet.publicData?.solanaAddress || '')"
                            >
                                <ng-container *ngTemplateOutlet="clipboardIcon"></ng-container>
                            </button>
                        </div>

                        <div class="crypto-address">
                            <div class="crypto-address__col">
                                <p class="crypto-address__text">Bitcoin</p>
                                <p class="crypto-address__address-text">{{ wallet.btcAddress }}</p>
                            </div>

                            <button
                                class="zelf-icon-button zelf-icon-button--40 zelf-icon-button--anti-flash-white zelf-icon-button--border-soft"
                                (click)="copyToClipboard(wallet.btcAddress || '')"
                            >
                                <ng-container *ngTemplateOutlet="clipboardIcon"></ng-container>
                            </button>
                        </div>

                        <div class="crypto-address" *ngIf="wallet.suiAddress">
                            <div class="crypto-address__col">
                                <p class="crypto-address__text">Sui</p>
                                <p class="crypto-address__address-text">{{ wallet.suiAddress }}</p>
                            </div>

                            <button
                                class="zelf-icon-button zelf-icon-button--40 zelf-icon-button--anti-flash-white zelf-icon-button--border-soft"
                                (click)="copyToClipboard(wallet.suiAddress || '')"
                            >
                                <ng-container *ngTemplateOutlet="clipboardIcon"></ng-container>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="wallet__tab-content" *ngIf="selectedTab === 'info'">
                    <div class="wallet__details">
                        <div class="wallet__detail mb-2" *ngIf="wallet.publicData?.registeredAt">
                            <p class="wallet__detail-title">{{ t("manage_domain.registered_since") }}</p>
                            <p class="wallet__detail-value">{{ wallet.publicData?.registeredAt | date: "dd MMM, yyyy, hh:mm aa" }}</p>
                        </div>

                        <div class="wallet__detail" *ngIf="wallet.publicData?.type === 'hold'">
                            <p class="wallet__detail-title">{{ t("manage_domain.hold_until") }}</p>
                            <p class="wallet__detail-value">{{ wallet.publicData?.expiresAt | date: "dd MMM, yyyy" }}</p>
                        </div>

                        <div class="wallet__detail" *ngIf="wallet && wallet.publicData && wallet.publicData?.type === 'mainnet'">
                            <p class="wallet__detail-title">{{ t("manage_domain.registered_until") }}</p>
                            <p class="wallet__detail-value">{{ wallet.publicData.expiresAt | date: "dd MMM, yyyy, hh:mm aa" }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </ng-container>

        <zelf-loader [diameter]="60" *ngIf="loading"></zelf-loader>
    </div>

    <div class="zelf-card__actions wallet__actions">
        <button mat-flat-button class="zelf-button zelf-button--black zelf-button--wide" [routerLink]="['/manage-domains']">
            {{ t("common.manage_domains") }}
        </button>
    </div>

    <ng-template #clipboardIcon>
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
                d="M15.5 20H5.5V7C5.5 6.45 5.05 6 4.5 6C3.95 6 3.5 6.45 3.5 7V20C3.5 21.1 4.4 22 5.5 22H15.5C16.05 22 16.5 21.55 16.5 21C16.5 20.45 16.05 20 15.5 20ZM20.5 16V4C20.5 2.9 19.6 2 18.5 2H9.5C8.4 2 7.5 2.9 7.5 4V16C7.5 17.1 8.4 18 9.5 18H18.5C19.6 18 20.5 17.1 20.5 16ZM18.5 16H9.5V4H18.5V16Z"
            />
        </svg>
    </ng-template>
</div>
