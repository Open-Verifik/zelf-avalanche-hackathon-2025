<ng-container *transloco="let t">
    <div class="home-header-accounts">
        <button mat-flat-button mat-icon-button class="home-header-accounts__exit" (click)="close()">
            <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M13.3 0.710703C12.91 0.320703 12.28 0.320703 11.89 0.710703L6.99997 5.5907L2.10997 0.700703C1.71997 0.310703 1.08997 0.310703 0.699971 0.700703C0.309971 1.0907 0.309971 1.7207 0.699971 2.1107L5.58997 7.0007L0.699971 11.8907C0.309971 12.2807 0.309971 12.9107 0.699971 13.3007C1.08997 13.6907 1.71997 13.6907 2.10997 13.3007L6.99997 8.4107L11.89 13.3007C12.28 13.6907 12.91 13.6907 13.3 13.3007C13.69 12.9107 13.69 12.2807 13.3 11.8907L8.40997 7.0007L13.3 2.1107C13.68 1.7307 13.68 1.0907 13.3 0.710703Z"
                />
            </svg>
        </button>

        <div class="zelf-name" (click)="close()" [routerLink]="['/wallet']">
            <h4 class="zelf-name__title" *ngIf="shareables.wallet.publicData">
                {{ shareables.wallet.publicData.zelfName | zelfName }}
            </h4>

            <div class="zelf-name__icon">
                <svg width="5" height="8" viewBox="0 0 5 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M0.499932 0.473185C0.239932 0.733185 0.239932 1.15319 0.499932 1.41319L3.0866 3.99985L0.499932 6.58652C0.239932 6.84652 0.239932 7.26652 0.499932 7.52652C0.759932 7.78652 1.17993 7.78652 1.43993 7.52652L4.49993 4.46652C4.75993 4.20652 4.75993 3.78652 4.49993 3.52652L1.43993 0.466518C1.1866 0.213185 0.759932 0.213185 0.499932 0.473185Z"
                    />
                </svg>
            </div>
        </div>

        <div class="wallet-rows">
            <div class="wallet-row wallet-row--current" (click)="close()">
                <ng-container *ngTemplateOutlet="walletRowTemplate; context: { $implicit: wallet }"></ng-container>
            </div>

            <ng-container *ngIf="wallets.length">
                <div class="wallet-row" *ngFor="let otherWallet of wallets" (click)="switchWallet(otherWallet)">
                    <ng-container *ngTemplateOutlet="walletRowTemplate; context: { $implicit: otherWallet }"></ng-container>
                </div>
            </ng-container>
        </div>

        <div class="home-header-accounts__actions">
            <button
                (click)="close()"
                [routerLink]="['/manage-domains']"
                class="zelf-button zelf-button--black zelf-button--wide zelf-button--thin"
                mat-flat-button
            >
                {{ t("common.manage_domains") }}
            </button>
        </div>
    </div>

    <ng-template #walletRowTemplate let-wallet>
        <div class="wallet-row__content">
            <div
                class="wallet-row__avatar"
                [ngClass]="{
                    'wallet-row__avatar--mainnet': wallet.publicData?.type === 'mainnet',
                    'wallet-row__avatar--hold': wallet.publicData?.type === 'hold',
                }"
            >
                <h3 class="wallet-row__avatar-letter">{{ wallet.publicData?.zelfName | firstLetter }}</h3>

                <span *ngIf="wallet.publicData?.isExpiringSoon" class="wallet-row__avatar-icon wallet-row__avatar-icon--warn">
                    <svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 10 0ZM10 15C9.45 15 9 14.55 9 14V10C9 9.45 9.45 9 10 9C10.55 9 11 9.45 11 10V14C11 14.55 10.55 15 10 15ZM11 7H9V5H11V7Z"
                        />
                    </svg>
                </span>

                <span *ngIf="wallet.publicData?.isInGracePeriod" class="wallet-row__avatar-icon wallet-row__avatar-icon--error">
                    <svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M14.24 5.76C13.07 4.59 11.54 4 10 4V10L5.76 14.24C8.1 16.58 11.9 16.58 14.25 14.24C16.59 11.9 16.59 8.1 14.24 5.76ZM10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 10 0ZM10 18C5.58 18 2 14.42 2 10C2 5.58 5.58 2 10 2C14.42 2 18 5.58 18 10C18 14.42 14.42 18 10 18Z"
                        />
                    </svg>
                </span>

                <span *ngIf="wallet.publicData?.isFullyExpired" class="wallet-row__avatar-icon wallet-row__avatar-icon--error">
                    <svg viewBox="0 0 20 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M2.47 17.5036H17.53C19.07 17.5036 20.03 15.8336 19.26 14.5036L11.73 1.49359C10.96 0.163594 9.04 0.163594 8.27 1.49359L0.739999 14.5036C-0.0300008 15.8336 0.929999 17.5036 2.47 17.5036ZM10 10.5036C9.45 10.5036 9 10.0536 9 9.50359V7.50359C9 6.95359 9.45 6.50359 10 6.50359C10.55 6.50359 11 6.95359 11 7.50359V9.50359C11 10.0536 10.55 10.5036 10 10.5036ZM11 14.5036H9V12.5036H11V14.5036Z"
                        />
                    </svg>
                </span>
            </div>

            <p class="wallet-row__name">{{ wallet.publicData?.zelfName | zelfName }}</p>

            <button
                class="zelf-icon-button zelf-icon-button--40 zelf-icon-button--border-soft wallet-row__expand"
                (click)="toggleWalletMenu(wallet.publicData?.zelfName || '')"
                (click)="$event.stopPropagation()"
            >
                <svg
                    [ngClass]="{ 'wallet-row__expand-icon--rotated': isWalletMenuOpen(wallet.publicData?.zelfName || '') }"
                    fill="none"
                    height="20"
                    viewBox="0 0 20 20"
                    width="20"
                    xmlns="http://www.w3.org/2000/svg"
                >
                    <path d="M5 7.5L10 12.5L15 7.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
            </button>
        </div>

        <div
            (click)="$event.stopPropagation()"
            [ngClass]="{ 'wallet-row__buttons--open': isWalletMenuOpen(wallet.publicData?.zelfName || '') }"
            class="wallet-row__buttons"
        >
            <button class="wallet-row__button" (click)="navigateToDownloadQR(wallet)">
                <div class="wallet-row__button-content">
                    <svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M14.3549 7.08398H12.4999V1.25065C12.4999 0.608984 11.9749 0.0839844 11.3333 0.0839844H6.66658C6.02492 0.0839844 5.49992 0.608984 5.49992 1.25065V7.08398H3.64492C2.60659 7.08398 2.08159 8.34398 2.81658 9.07898L8.17159 14.434C8.62659 14.889 9.36158 14.889 9.81658 14.434L15.1716 9.07898C15.9066 8.34398 15.3933 7.08398 14.3549 7.08398ZM0.833252 18.7507C0.833252 19.3923 1.35825 19.9173 1.99992 19.9173H15.9999C16.6416 19.9173 17.1666 19.3923 17.1666 18.7507C17.1666 18.109 16.6416 17.584 15.9999 17.584H1.99992C1.35825 17.584 0.833252 18.109 0.833252 18.7507Z"
                            fill="#181818"
                        />
                    </svg>

                    <span>{{ t("common.download_qr") }}</span>
                </div>
            </button>

            <button class="wallet-row__button" (click)="navigateToSeedPhrase(wallet)">
                <div class="wallet-row__button-content">
                    <svg width="20" height="26" viewBox="0 0 20 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M17.0001 8.91667H15.8334V6.58333C15.8334 3.36333 13.2201 0.75 10.0001 0.75C6.78008 0.75 4.16675 3.36333 4.16675 6.58333V8.91667H3.00008C1.71675 8.91667 0.666748 9.96667 0.666748 11.25V22.9167C0.666748 24.2 1.71675 25.25 3.00008 25.25H17.0001C18.2834 25.25 19.3334 24.2 19.3334 22.9167V11.25C19.3334 9.96667 18.2834 8.91667 17.0001 8.91667ZM10.0001 19.4167C8.71675 19.4167 7.66675 18.3667 7.66675 17.0833C7.66675 15.8 8.71675 14.75 10.0001 14.75C11.2834 14.75 12.3334 15.8 12.3334 17.0833C12.3334 18.3667 11.2834 19.4167 10.0001 19.4167ZM6.50008 8.91667V6.58333C6.50008 4.64667 8.06342 3.08333 10.0001 3.08333C11.9367 3.08333 13.5001 4.64667 13.5001 6.58333V8.91667H6.50008Z"
                            fill="#181818"
                        />
                    </svg>

                    <span>{{ t("common.seed_phrase") }}</span>
                </div>
            </button>

            <button class="wallet-row__button" (click)="navigateToZelfLink(wallet)">
                <div class="wallet-row__button-content">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M11.9883 0.333984C5.54825 0.333984 0.333252 5.56065 0.333252 12.0007C0.333252 18.4407 5.54825 23.6673 11.9883 23.6673C18.4399 23.6673 23.6666 18.4407 23.6666 12.0007C23.6666 5.56065 18.4399 0.333984 11.9883 0.333984ZM20.0733 7.33398H16.6316C16.2583 5.87565 15.7216 4.47565 15.0216 3.18065C17.1683 3.91565 18.9533 5.40898 20.0733 7.33398ZM11.9999 2.71398C12.9683 4.11398 13.7266 5.66565 14.2283 7.33398H9.77159C10.2733 5.66565 11.0316 4.11398 11.9999 2.71398ZM2.96992 14.334C2.78325 13.5873 2.66659 12.8057 2.66659 12.0007C2.66659 11.1957 2.78325 10.414 2.96992 9.66732H6.91325C6.81992 10.4373 6.74992 11.2073 6.74992 12.0007C6.74992 12.794 6.81992 13.564 6.91325 14.334H2.96992ZM3.92658 16.6673H7.36825C7.74158 18.1257 8.27825 19.5257 8.97825 20.8207C6.83158 20.0856 5.04659 18.604 3.92658 16.6673ZM7.36825 7.33398H3.92658C5.04659 5.39732 6.83158 3.91565 8.97825 3.18065C8.27825 4.47565 7.74158 5.87565 7.36825 7.33398ZM11.9999 21.2873C11.0316 19.8873 10.2733 18.3356 9.77159 16.6673H14.2283C13.7266 18.3356 12.9683 19.8873 11.9999 21.2873ZM14.7299 14.334H9.26992C9.16492 13.564 9.08325 12.794 9.08325 12.0007C9.08325 11.2073 9.16492 10.4257 9.26992 9.66732H14.7299C14.8349 10.4257 14.9166 11.2073 14.9166 12.0007C14.9166 12.794 14.8349 13.564 14.7299 14.334ZM15.0216 20.8207C15.7216 19.5257 16.2583 18.1257 16.6316 16.6673H20.0733C18.9533 18.5923 17.1683 20.0856 15.0216 20.8207ZM17.0866 14.334C17.1799 13.564 17.2499 12.794 17.2499 12.0007C17.2499 11.2073 17.1799 10.4373 17.0866 9.66732H21.0299C21.2166 10.414 21.3333 11.1957 21.3333 12.0007C21.3333 12.8057 21.2166 13.5873 21.0299 14.334H17.0866Z"
                            fill="#181818"
                        />
                    </svg>

                    <span>{{ t("common.zelf_link") }}</span>
                </div>
            </button>
        </div>
    </ng-template>
</ng-container>
