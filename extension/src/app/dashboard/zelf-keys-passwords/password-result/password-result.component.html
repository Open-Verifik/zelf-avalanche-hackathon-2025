<div class="password-result-container">
	<div class="result-card">
		<div class="result-header">
			<div class="status-icon">{{ getStatusIcon() }}</div>
			<h1 class="result-title">{{ getStatusTitle() }}</h1>
			<p class="result-message">{{ getStatusMessage() }}</p>
		</div>

		<div class="result-content" *ngIf="!loading">
			<!-- Success Summary -->
			<div class="data-section" *ngIf="getResultStatus() === 'success'">
				<h3 class="section-title">üéâ Storage Successful!</h3>
				<div class="success-summary">
					<p class="success-message">{{ apiResult.message || "Password stored successfully!" }}</p>
				</div>
			</div>

			<!-- Password Data Summary -->
			<div class="data-section">
				<h3 class="section-title">üìù Stored Password Details</h3>
				<div class="data-grid">
					<div class="data-item">
						<label>Website</label>
						<span>{{ apiResult.publicData?.website || passwordData.url || "N/A" }}</span>
					</div>
					<div class="data-item">
						<label>Username</label>
						<span>{{ apiResult.publicData?.username || passwordData.email || "N/A" }}</span>
					</div>
					<div class="data-item">
						<label>Type</label>
						<span class="type-badge">{{ apiResult.publicData?.type || "password" }}</span>
					</div>
					<div class="data-item">
						<label>Category</label>
						<span class="category-badge">{{ apiResult.publicData?.category || "N/A" }}</span>
					</div>
					<div class="data-item">
						<label>Zelf Name</label>
						<span>{{ apiResult.publicData?.zelfName || "N/A" }}</span>
					</div>
					<div class="data-item">
						<label>Timestamp</label>
						<span>{{ apiResult.publicData?.timestamp ? (apiResult.publicData.timestamp | date: "medium") : "N/A" }}</span>
					</div>
				</div>
			</div>

			<!-- NFT Information -->
			<div class="data-section" *ngIf="apiResult.NFT?.success">
				<h3 class="section-title">üñºÔ∏è NFT Created</h3>
				<div class="nft-info">
					<div class="nft-image">
						<img [src]="apiResult.NFT.metadata.image" alt="ZelfKey NFT" />
					</div>
					<div class="nft-details">
						<div class="data-item">
							<label>Token ID</label>
							<span class="token-id">#{{ apiResult.NFT.tokenId }}</span>
						</div>
						<div class="data-item">
							<label>Cost</label>
							<span class="cost">{{ apiResult.NFT.cost }} AVAX</span>
						</div>
						<div class="data-item">
							<label>Contract</label>
							<span class="contract-address">{{ apiResult.NFT.contractAddress }}</span>
						</div>
						<div class="data-item">
							<label>Transaction</label>
							<a [href]="apiResult.NFT.explorerUrl" target="_blank" class="tx-link">
								{{ apiResult.NFT.transactionHash | slice: 0 : 10 }}...{{ apiResult.NFT.transactionHash | slice: -10 }}
							</a>
						</div>
					</div>
				</div>
			</div>

			<!-- IPFS Information -->
			<div class="data-section" *ngIf="apiResult.ipfs">
				<h3 class="section-title">üåê IPFS Storage</h3>
				<div class="ipfs-info">
					<div class="data-item">
						<label>IPFS Hash</label>
						<span class="hash">{{ apiResult.ipfs.hash }}</span>
					</div>
					<div class="data-item">
						<label>Gateway URL</label>
						<a [href]="apiResult.ipfs.gatewayUrl" target="_blank" class="gateway-link"> View on IPFS Gateway </a>
					</div>
					<div class="data-item">
						<label>File Size</label>
						<span>{{ apiResult.ipfs.pinSize }} bytes</span>
					</div>
					<div class="data-item">
						<label>Uploaded</label>
						<span>{{ apiResult.ipfs.timestamp ? (apiResult.ipfs.timestamp | date: "medium") : "N/A" }}</span>
					</div>
				</div>
			</div>

			<!-- ZelfProof Information -->
			<div class="data-section" *ngIf="apiResult.zelfProof">
				<h3 class="section-title">üîê ZelfProof Generated</h3>
				<div class="zelfproof-info">
					<div class="data-item">
						<label>ZelfProof</label>
						<span class="zelfproof-string">{{ apiResult.zelfProof | slice: 0 : 50 }}...</span>
					</div>
					<div class="data-item">
						<label>QR Code</label>
						<div class="qr-code">
							<img [src]="'data:image/png;base64,' + apiResult.zelfQR" alt="ZelfProof QR Code" />
						</div>
					</div>
				</div>
			</div>

			<!-- API Response Debug (Collapsible) -->
			<div class="data-section">
				<h3 class="section-title" (click)="toggleDebugView()" class="debug-toggle">
					üîç Debug Information <span class="toggle-icon">{{ showDebug ? "‚ñº" : "‚ñ∂" }}</span>
				</h3>
				<div class="api-response" *ngIf="showDebug">
					<pre class="json-display">{{ apiResult | json }}</pre>
				</div>
			</div>

			<!-- Next Steps -->
			<div class="data-section">
				<h3 class="section-title">Next Steps</h3>
				<div class="next-steps">
					<p *ngIf="getResultStatus() === 'success'">
						Your password is now securely stored. You can view it in your passwords list or add another password.
					</p>
					<p *ngIf="getResultStatus() === 'error'">
						Please review the error details above and try again. If the problem persists, contact support.
					</p>
					<p *ngIf="getResultStatus() === 'unknown'">
						The system couldn't determine the status. Please check the API response above for details.
					</p>
				</div>
			</div>
		</div>

		<!-- Loading State -->
		<div class="loading-state" *ngIf="loading">
			<div class="spinner"></div>
			<p>Loading result...</p>
		</div>

		<!-- Action Buttons -->
		<div class="result-actions">
			<button class="btn-secondary" (click)="onBackToPasswords()">Back to Passwords</button>
			<button class="btn-primary" (click)="onAddAnotherPassword()">Add Another Password</button>
		</div>
	</div>
</div>
