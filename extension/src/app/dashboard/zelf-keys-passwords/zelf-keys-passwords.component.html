<div class="zelf-keys-passwords">
	<div class="header">
		<h2>Passwords</h2>
		<p>Manage your secure passwords and credentials</p>
	</div>

	<div class="content">
		<!-- Loading State -->
		<div *ngIf="loading" class="loading-state">
			<div class="spinner"></div>
			<p>Loading your passwords...</p>
		</div>

		<!-- Error State -->
		<div *ngIf="error && !loading" class="error-state">
			<div class="icon">⚠️</div>
			<h3>Error loading passwords</h3>
			<p>{{ error }}</p>
			<button class="btn-secondary" (click)="onRefresh()">Try Again</button>
		</div>

		<!-- Empty State -->
		<div *ngIf="!loading && !error && storedPasswords.length === 0" class="empty-state">
			<div class="icon">🔐</div>
			<h3>No passwords yet</h3>
			<p>Start adding your passwords to keep them secure and easily accessible</p>
			<button class="btn-primary" (click)="onAddPassword()">Add Password</button>
		</div>

		<!-- Passwords List -->
		<div *ngIf="!loading && !error && storedPasswords.length > 0" class="passwords-list">
			<div class="list-header">
				<h3>{{ storedPasswords.length }} stored password{{ storedPasswords.length !== 1 ? "s" : "" }}</h3>
				<button class="btn-secondary" (click)="onRefresh()">Refresh</button>
			</div>

			<div class="password-items">
				<div *ngFor="let password of storedPasswords; trackBy: trackByPassword" class="password-item" (click)="onPasswordClick(password)">
					<div class="password-info">
						<div class="password-title">
							<span class="icon">🔐</span>
							<span class="title">{{ password.publicData?.website || "Untitled Password" }}</span>
						</div>
						<div class="password-meta">
							<span class="username">{{ password.publicData?.username || "No username" }}</span>
							<span class="separator">•</span>
							<span class="type">{{ password.publicData?.type || "password" }}</span>
							<span class="separator">•</span>
							<span class="date">{{
								password.publicData?.timestamp ? (password.publicData.timestamp | date: "short") : "Unknown date"
							}}</span>
						</div>
					</div>
					<div class="password-actions">
						<button class="btn-icon" title="View details">👁️</button>
					</div>
				</div>
			</div>

			<div class="add-more">
				<button class="btn-primary" (click)="onAddPassword()">Add Another Password</button>
			</div>
		</div>
	</div>
</div>
