<div class="password-detail">
	<!-- Header -->
	<div class="header">
		<button class="btn-back" (click)="onBackToList()">‚Üê Back to Passwords</button>
		<h2>Password Details</h2>
	</div>

	<!-- Loading State -->
	<div *ngIf="loading" class="loading-state">
		<div class="spinner"></div>
		<p>Loading password details...</p>
	</div>

	<!-- Error State -->
	<div *ngIf="error && !loading" class="error-state">
		<div class="icon">‚ö†Ô∏è</div>
		<h3>Error loading password</h3>
		<p>{{ error }}</p>
		<button class="btn-secondary" (click)="onBackToList()">Go Back</button>
	</div>

	<!-- Password Details -->
	<div *ngIf="!loading && !error && password" class="content">
		<!-- Password Card -->
		<div class="password-card">
			<div class="card-header">
				<div class="icon">üîê</div>
				<div class="title-info">
					<h3>{{ password.publicData?.website || "Untitled Password" }}</h3>
					<p class="subtitle">{{ password.publicData?.type || "password" }}</p>
				</div>
				<div class="actions">
					<button class="btn-primary" (click)="onDecryptClick()" [disabled]="decrypting">
						{{ decrypting ? "Decrypting..." : "Decrypt Password" }}
					</button>
				</div>
			</div>

			<div class="card-content">
				<div class="info-row">
					<label>Username:</label>
					<span>{{ password.publicData?.username || "No username" }}</span>
				</div>
				<div class="info-row">
					<label>Category:</label>
					<span>{{ password.publicData?.category || "No category" }}</span>
				</div>
				<div class="info-row">
					<label>Created:</label>
					<span>{{ password.publicData?.timestamp ? (password.publicData.timestamp | date: "medium") : "Unknown date" }}</span>
				</div>
				<div class="info-row">
					<label>Zelf Name:</label>
					<span>{{ password.publicData?.zelfName || "No zelf name" }}</span>
				</div>
				<div class="info-row">
					<label>IPFS Hash:</label>
					<span class="hash">{{ password.id }}</span>
				</div>
			</div>
		</div>

		<!-- Decrypted Data (when available) -->
		<div *ngIf="decryptedData" class="decrypted-data">
			<h3>Decrypted Information</h3>
			<div class="data-card">
				<div class="info-row">
					<label>Website:</label>
					<span>{{ decryptedData.website || "N/A" }}</span>
				</div>
				<div class="info-row">
					<label>Username:</label>
					<span>{{ decryptedData.username || "N/A" }}</span>
				</div>
				<div class="info-row">
					<label>Password:</label>
					<span class="password-field">
						{{ decryptedData.password || "N/A" }}
						<button class="btn-copy" title="Copy password" (click)="onCopyPassword()">üìã</button>
					</span>
				</div>
				<div class="info-row" *ngIf="decryptedData.notes">
					<label>Notes:</label>
					<span>{{ decryptedData.notes }}</span>
				</div>
				<div class="info-row" *ngIf="decryptedData.difficulty">
					<label>Difficulty:</label>
					<span class="difficulty-badge">{{ decryptedData.difficulty }}</span>
				</div>
			</div>
		</div>
	</div>

	<!-- Biometrics Modal -->
	<div *ngIf="showBiometrics" class="biometrics-modal">
		<div class="modal-content">
			<div class="modal-header">
				<h3>Verify Your Identity</h3>
				<p>Please verify your face to decrypt this password</p>
			</div>
			<div class="modal-body">
				<app-password-biometrics
					[isDecryptMode]="true"
					(biometricsSuccess)="onBiometricsSuccess($event)"
					(biometricsCancel)="onBiometricsCancel()"
				>
				</app-password-biometrics>
			</div>
		</div>
	</div>
</div>
