{"version":3,"file":"src_app_dashboard_zelf-keys-passwords_password-detail_password-detail_component_ts-node_modul-6643f9.js","mappings":"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","sources":["./node_modules/rxjs/dist/esm/internal/util/Immediate.js","./src/app/dashboard/zelf-keys-passwords/password-biometrics/password-biometrics.component.ts","./src/app/dashboard/zelf-keys-passwords/password-biometrics/password-biometrics.component.html","./src/app/dashboard/zelf-keys-passwords/password-detail/password-detail.component.ts","./src/app/dashboard/zelf-keys-passwords/password-detail/password-detail.component.html","./node_modules/rxjs/dist/esm/internal/scheduler/AsapAction.js","./node_modules/rxjs/dist/esm/internal/scheduler/AsapScheduler.js","./node_modules/rxjs/dist/esm/internal/observable/merge.js","./node_modules/rxjs/dist/esm/internal/scheduler/asap.js","./node_modules/rxjs/dist/esm/internal/scheduler/immediateProvider.js"],"sourcesContent":["let nextHandle = 1;\nlet resolved;\nconst activeHandles = {};\nfunction findAndClearHandle(handle) {\n    if (handle in activeHandles) {\n        delete activeHandles[handle];\n        return true;\n    }\n    return false;\n}\nexport const Immediate = {\n    setImmediate(cb) {\n        const handle = nextHandle++;\n        activeHandles[handle] = true;\n        if (!resolved) {\n            resolved = Promise.resolve();\n        }\n        resolved.then(() => findAndClearHandle(handle) && cb());\n        return handle;\n    },\n    clearImmediate(handle) {\n        findAndClearHandle(handle);\n    },\n};\nexport const TestTools = {\n    pending() {\n        return Object.keys(activeHandles).length;\n    }\n};\n","import { Component, OnInit, OnDestroy, EventEmitter, Output, ViewChild, ElementRef, ChangeDetectorRef, Renderer2, Input } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { FormsModule } from \"@angular/forms\";\nimport { TranslocoModule, TranslocoService } from \"@jsverse/transloco\";\nimport { RouterModule, Router, ActivatedRoute } from \"@angular/router\";\nimport { WebcamComponent, WebcamImage, WebcamInitError, WebcamModule } from \"ngx-webcam\";\nimport { Subject, takeUntil, Observable } from \"rxjs\";\nimport { FlexLayoutModule } from \"@angular/flex-layout\";\nimport { MatButtonModule } from \"@angular/material/button\";\nimport { MatProgressBarModule } from \"@angular/material/progress-bar\";\nimport { MatProgressSpinnerModule } from \"@angular/material/progress-spinner\";\nimport { ZelfLoaderComponent } from \"app/zelf-loader/zelf-loader.component\";\nimport { HttpWrapperService } from \"app/http-wrapper.service\";\nimport { MediaStreamService } from \"app/services/media-stream.service\";\nimport { WalletService } from \"../../../wallet.service\";\nimport { environment } from \"environments/environment\";\nimport * as faceapi from \"@vladmandic/face-api\";\nimport { ChromeService } from \"../../../chrome.service\";\n\n@Component({\n\tselector: \"app-password-biometrics\",\n\tstandalone: true,\n\timports: [\n\t\tCommonModule,\n\t\tFormsModule,\n\t\tFlexLayoutModule,\n\t\tMatButtonModule,\n\t\tMatProgressBarModule,\n\t\tMatProgressSpinnerModule,\n\t\tTranslocoModule,\n\t\tWebcamModule,\n\t\tZelfLoaderComponent,\n\t\tRouterModule,\n\t],\n\ttemplateUrl: \"./password-biometrics.component.html\",\n\tstyleUrls: [\"./password-biometrics.component.scss\"],\n})\nexport class PasswordBiometricsComponent implements OnInit, OnDestroy {\n\t@ViewChild(\"maskResult\", { static: false }) public maskResultCanvasRef: ElementRef | undefined;\n\t@ViewChild(\"toSend\", { static: false }) public ToSendCanvasRef: ElementRef | undefined;\n\t@ViewChild(\"webcam\", { static: false }) public webcamRef?: WebcamComponent;\n\n\t@Input() isDecryptMode: boolean = false;\n\t@Output() canNavigate: EventEmitter<boolean> = new EventEmitter<boolean>();\n\t@Output() error: EventEmitter<any> = new EventEmitter<any>();\n\t@Output() imageCaptured: EventEmitter<string> = new EventEmitter<string>();\n\t@Output() biometricsSuccess: EventEmitter<any> = new EventEmitter<any>();\n\t@Output() biometricsCancel: EventEmitter<void> = new EventEmitter<void>();\n\n\tprivate unsubscriber$: Subject<void> = new Subject<void>();\n\tprivate _takePicture: Subject<void> = new Subject<void>();\n\tprivate _intervals: any = {};\n\n\t// Camera and face detection properties\n\tcamera = {\n\t\tisLoading: true,\n\t\thasPermissions: true,\n\t\tisLowQuality: false,\n\t\tdimensions: {\n\t\t\tvideo: { width: 0, height: 0, max: { width: 800, height: 600 } },\n\t\t\tresult: { width: 0, height: 0, offsetX: 0, offsetY: 0 },\n\t\t\treal: { width: 0, height: 0, offsetX: 0, offsetY: 0 },\n\t\t},\n\t\tconfiguration: {\n\t\t\tfacingMode: \"user\",\n\t\t\twidth: { ideal: 800 },\n\t\t\theight: { ideal: 600 },\n\t\t},\n\t};\n\n\tface = {\n\t\tvideo: { center: { x: 0, y: 0 }, radius: { x: 0, y: 0 }, margin: { x: 0, y: 0 } },\n\t\treal: { center: { x: 0, y: 0 }, radius: { x: 0, y: 0 }, margin: { x: 0, y: 0 } },\n\t\tminHeight: 200,\n\t\tminPixels: 200,\n\t\tsuccessPosition: 0,\n\t\tthreshold: 0.25,\n\t};\n\n\tresponse = {\n\t\tbase64Image: \"\",\n\t\tisLoading: false,\n\t};\n\tapiKeysSessionJWT: string;\n\terrorFace: any = null;\n\tlastFace: any;\n\tpasswordData: any = {};\n\taspectRatio = 0.75;\n\tmasterPassword: string = \"\";\n\n\tconstructor(\n\t\tprivate _changeDetectorRef: ChangeDetectorRef,\n\t\tprivate _httpWrapperService: HttpWrapperService,\n\t\tprivate _mediaStreamService: MediaStreamService,\n\t\tprivate _renderer: Renderer2,\n\t\tprivate _translocoService: TranslocoService,\n\t\tprivate _walletService: WalletService,\n\t\tprivate _router: Router,\n\t\tprivate _route: ActivatedRoute,\n\t\tprivate chromeService: ChromeService\n\t) {\n\t\tthis.apiKeysSessionJWT = \"\";\n\t}\n\n\tasync ngOnInit(): Promise<void> {\n\t\t// Ensure extension is in full screen mode for better security during biometric authentication\n\t\tif (this.chromeService.isExtension) {\n\t\t\tawait this.chromeService.ensureFullScreen(\"dashboard/passwords/biometrics\");\n\t\t}\n\n\t\tthis._route.queryParams.subscribe((params) => {\n\t\t\tif (params[\"passwordData\"]) {\n\t\t\t\ttry {\n\t\t\t\t\tthis.passwordData = JSON.parse(decodeURIComponent(params[\"passwordData\"]));\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(\"Error parsing password data:\", e);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.initZelfKeySession();\n\n\t\tthis._initializeBiometrics();\n\t}\n\n\tasync initZelfKeySession(): Promise<void> {\n\t\t// The wallet service now caches the JWT token\n\t\tawait this._walletService.initZelfKeySession();\n\n\t\t// Get the cached token\n\t\tconst jwt = this._walletService.getZelfKeyJWT();\n\n\t\tif (jwt) {\n\t\t\tthis.apiKeysSessionJWT = jwt;\n\t\t}\n\t}\n\n\t/**\n\t * Handle successful biometrics verification in decrypt mode\n\t */\n\tonBiometricsSuccess(faceBase64: string, password?: string): void {\n\t\tif (this.isDecryptMode) {\n\t\t\tthis.biometricsSuccess.emit({\n\t\t\t\tfaceBase64, // Send just the raw base64 string like store mode\n\t\t\t\tpassword: this.masterPassword || password,\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Handle biometrics cancellation in decrypt mode\n\t */\n\tonBiometricsCancel(): void {\n\t\tif (this.isDecryptMode) {\n\t\t\tthis.biometricsCancel.emit();\n\t\t}\n\t}\n\n\tngOnDestroy(): void {\n\t\tif (this._intervals.detectFace) {\n\t\t\tclearInterval(this._intervals.detectFace);\n\t\t}\n\t\tif (this._intervals.checkNgxVideo) {\n\t\t\tclearInterval(this._intervals.checkNgxVideo);\n\t\t}\n\t\tthis.unsubscriber$.next();\n\t\tthis.unsubscriber$.complete();\n\t}\n\n\tget takePicture$(): Observable<void> {\n\t\treturn this._takePicture.asObservable();\n\t}\n\n\tprivate async _initializeBiometrics(): Promise<void> {\n\t\ttry {\n\t\t\t// Always wait for the wallet service to load the models\n\t\t\tthis._walletService.faceapi$.pipe(takeUntil(this.unsubscriber$)).subscribe(async (isLoaded) => {\n\t\t\t\tif (!isLoaded) return;\n\n\t\t\t\tthis.camera.isLoading = false;\n\t\t\t\tawait this._setMaxVideoDimensions();\n\t\t\t\tthis._startNgxVideoInterval();\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tconsole.error(\"❌ Error initializing biometrics:\", error);\n\t\t\tthis.error.emit(error);\n\t\t}\n\t}\n\n\tprivate async _checkModelsLoaded(): Promise<boolean> {\n\t\t// This method is no longer needed since we use the wallet service observable\n\t\treturn true;\n\t}\n\n\tprivate _waitForModels(): void {\n\t\t// This method is no longer needed since we use the wallet service observable\n\t}\n\n\tprivate _waitForFaceApi(): void {\n\t\t// This method is no longer needed since we use the wallet service observable\n\t}\n\n\tprivate async _setMaxVideoDimensions(): Promise<void> {\n\t\tconst maxWidth = 800;\n\t\tconst maxHeight = 600;\n\n\t\t// Set initial video dimensions\n\t\tthis.camera.dimensions.video.width = maxWidth;\n\t\tthis.camera.dimensions.video.height = maxHeight;\n\n\t\t// Set result dimensions\n\t\tthis.camera.dimensions.result.width = maxWidth;\n\t\tthis.camera.dimensions.result.height = maxHeight;\n\n\t\t// Initialize face dimensions\n\t\tthis.face.video = this._getCenterAndRadius(maxHeight, maxWidth);\n\n\t\tthis._changeDetectorRef.markForCheck();\n\t}\n\n\tprivate _getCenterAndRadius(\n\t\theight: number,\n\t\twidth: number\n\t): { center: { x: number; y: number }; radius: { x: number; y: number }; margin: { x: number; y: number } } {\n\t\tconst center = {\n\t\t\tx: width / 2,\n\t\t\ty: height / 2,\n\t\t};\n\n\t\tconst margin = {\n\t\t\ty: height * 0.05,\n\t\t\tx: 0,\n\t\t};\n\n\t\tmargin.x = margin.y * 0.8;\n\n\t\tconst radius = {\n\t\t\ty: height * 0.42,\n\t\t\tx: 0,\n\t\t};\n\n\t\tradius.x = radius.y * this.aspectRatio;\n\n\t\tif (radius.x * 2 >= width) {\n\t\t\tradius.x = width * 0.48;\n\t\t\tradius.y = radius.x / this.aspectRatio;\n\t\t}\n\n\t\treturn { center, radius, margin };\n\t}\n\n\tprivate _setResultDimensions(type: string, height: number, width: number): void {\n\t\tconst dimensions = this.camera.dimensions[type as keyof typeof this.camera.dimensions] as any;\n\t\tif (!dimensions) return;\n\n\t\tdimensions.height = height;\n\t\tdimensions.offsetY = 0;\n\t\tdimensions.width = Math.min(2.8 * (this.face.real?.radius?.x || 0), width);\n\t\tdimensions.offsetX = (this.face.real?.center?.x || 0) - dimensions.width / 2;\n\t}\n\n\tprivate _setImageOnCanvas(canvas: HTMLCanvasElement, img: HTMLImageElement, dimensions: any, resultDimensions: any): void {\n\t\tconst context = canvas.getContext(\"2d\");\n\t\tif (!context) return;\n\n\t\tcanvas.width = resultDimensions.width;\n\t\tcanvas.height = resultDimensions.height;\n\n\t\tcontext.drawImage(\n\t\t\timg,\n\t\t\tdimensions.offsetX,\n\t\t\tdimensions.offsetY,\n\t\t\tdimensions.width,\n\t\t\tdimensions.height,\n\t\t\t0,\n\t\t\t0,\n\t\t\tresultDimensions.width,\n\t\t\tresultDimensions.height\n\t\t);\n\t}\n\n\tprivate _drawOvalCenterAndMask(): void {\n\t\tconst maskResultCanvas = this.maskResultCanvasRef?.nativeElement;\n\t\tif (!maskResultCanvas) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst ctx = maskResultCanvas.getContext(\"2d\");\n\t\tif (!ctx) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst videoDim = this.camera.dimensions.video;\n\t\tif (!videoDim.width || !videoDim.height) {\n\t\t\treturn;\n\t\t}\n\t\tmaskResultCanvas.width = videoDim.width;\n\t\tmaskResultCanvas.height = videoDim.height;\n\n\t\tconst { center, radius } = this.face.video || { center: { x: 0, y: 0 }, radius: { x: 0, y: 0 } };\n\n\t\tctx.clearRect(0, 0, maskResultCanvas.width, maskResultCanvas.height);\n\n\t\tctx.fillStyle = \"rgba(255, 255, 255, 0.75)\";\n\t\tctx.fillRect(0, 0, maskResultCanvas.width, maskResultCanvas.height);\n\n\t\tctx.globalCompositeOperation = \"destination-out\";\n\n\t\tctx.fillStyle = \"rgba(255, 255, 255, 1)\";\n\t\tctx.beginPath();\n\t\tctx.ellipse(center.x, center.y, radius.x, radius.y, 0, 0, 2 * Math.PI);\n\t\tctx.fill();\n\t\tctx.closePath();\n\n\t\tctx.globalCompositeOperation = \"source-over\";\n\t}\n\n\tprivate _drawStatusOval(ctx: any, isOk: boolean): void {\n\t\tconst { center, radius } = this.face.video || { center: { x: 0, y: 0 }, radius: { x: 0, y: 0 } };\n\n\t\tctx.beginPath();\n\t\tctx.ellipse(center.x, center.y, radius.x, radius.y, 0, 0, 2 * Math.PI);\n\t\tctx.lineWidth = 5;\n\t\tctx.strokeStyle = isOk ? \"green\" : \"red\";\n\t\tctx.stroke();\n\t\tctx.closePath();\n\t}\n\n\tprivate _inRange(value: number, min: number, max: number): boolean {\n\t\treturn value >= min && value <= max;\n\t}\n\n\tprivate _isFaceCentered(nose: any): void {\n\t\tconst faceCenterX = nose.x;\n\t\tconst faceCenterY = nose.y;\n\n\t\tconst { center, margin } = this.face.real || { center: { x: 0, y: 0 }, margin: { x: 0, y: 0 } };\n\n\t\tconst inRangeX = this._inRange(faceCenterX, center.x - margin.x, center.x + margin.x);\n\t\tconst inRangeY = this._inRange(faceCenterY, center.y, center.y + margin.y * 2.5);\n\n\t\tconst isFaceCentered = inRangeX && inRangeY;\n\n\t\tif (isFaceCentered) return;\n\n\t\tlet direction = \"\";\n\n\t\tif (!inRangeX) direction += `${faceCenterX < center.x - margin.x ? \"←\" : \"→\"}`;\n\t\tif (!inRangeY) direction += `${faceCenterY < center.y ? \"↓\" : \"↑\"}`;\n\n\t\tthis.errorFace = {\n\t\t\tcanvas: direction,\n\t\t\tsubtitle: \"Center your face in the oval\",\n\t\t\ttitle: \"Center your face\",\n\t\t};\n\t}\n\n\tprivate _isFaceClose(landmarks: any): void {\n\t\tconst realDim = this.camera.dimensions.real || { height: 0, width: 0 };\n\t\tconst totalFaceArea = landmarks.imageHeight * landmarks.imageWidth;\n\t\tconst totalImageArea = realDim.height * realDim.width;\n\t\tconst faceProportion = totalFaceArea / totalImageArea;\n\n\t\tif (faceProportion < this.face.threshold || landmarks.imageHeight < this.face.minPixels || landmarks.imageWidth < this.face.minPixels) {\n\t\t\tthis.errorFace = {\n\t\t\t\ttitle: \"Get closer\",\n\t\t\t\tsubtitle: \"Move your face closer to the camera\",\n\t\t\t};\n\t\t}\n\t}\n\n\tprivate _startFaceDetectionInterval(): void {\n\t\tif (this._intervals.detectFace) {\n\t\t\tclearInterval(this._intervals.detectFace);\n\t\t\tthis._intervals.detectFace = null;\n\t\t}\n\n\t\tthis._intervals.detectFace = setInterval(() => {\n\t\t\tthis._detectFace();\n\t\t}, 100);\n\t}\n\n\tprivate async _detectFace(): Promise<void> {\n\t\tconst videoNgx = this.webcamRef?.nativeVideoElement;\n\t\tif (!videoNgx || this.response.base64Image) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst detection = await faceapi.detectAllFaces(videoNgx, new faceapi.SsdMobilenetv1Options({ minConfidence: 0.2 })).withFaceLandmarks();\n\n\t\t\tconst context = this.maskResultCanvasRef?.nativeElement.getContext(\"2d\", { willReadFrequently: true });\n\t\t\tif (!context) return;\n\n\t\t\t// Always redraw the base oval mask first\n\t\t\tthis._drawOvalCenterAndMask();\n\n\t\t\tif (detection.length > 0) {\n\t\t\t\tthis.lastFace = detection[0];\n\t\t\t\tthis.errorFace = null;\n\n\t\t\t\t// Set real dimensions for face positioning calculations\n\t\t\t\tthis.camera.dimensions.real = {\n\t\t\t\t\theight: videoNgx.videoHeight,\n\t\t\t\t\twidth: videoNgx.videoWidth,\n\t\t\t\t\toffsetX: 0,\n\t\t\t\t\toffsetY: 0,\n\t\t\t\t};\n\t\t\t\tthis.face.real = this._getCenterAndRadius(videoNgx.videoHeight, videoNgx.videoWidth);\n\n\t\t\t\t// Check face positioning\n\t\t\t\tthis._isFaceCentered(this.lastFace.landmarks.getNose()[3]);\n\t\t\t\tthis._isFaceClose(this.lastFace.landmarks);\n\n\t\t\t\t// Draw status oval (green if no errors, red if errors)\n\t\t\t\tthis._drawStatusOval(context, !this.errorFace);\n\n\t\t\t\tif (!this.errorFace) {\n\t\t\t\t\t++this.face.successPosition;\n\t\t\t\t} else {\n\t\t\t\t\tthis.face.successPosition = 0;\n\t\t\t\t}\n\n\t\t\t\tif (this.face.successPosition > 2) {\n\t\t\t\t\t// Capture after 3 successful frames\n\t\t\t\t\tthis.face.successPosition = 0;\n\t\t\t\t\tthis._takePicture.next(); // Trigger image capture\n\t\t\t\t\tclearInterval(this._intervals.detectFace); // Stop detection after capture\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.face.successPosition = 0;\n\t\t\t\tthis.errorFace = {\n\t\t\t\t\ttitle: \"No face detected\",\n\t\t\t\t\tsubtitle: \"Please look at the camera\",\n\t\t\t\t};\n\t\t\t\t// Draw red oval if no face detected\n\t\t\t\tthis._drawStatusOval(context, false);\n\t\t\t}\n\n\t\t\tthis._changeDetectorRef.markForCheck();\n\t\t} catch (error: any) {\n\t\t\tconsole.error(\"Face detection error:\", error);\n\t\t\tthis.error.emit(error);\n\t\t\tconst context = this.maskResultCanvasRef?.nativeElement.getContext(\"2d\");\n\t\t\tif (context) this._drawStatusOval(context, false);\n\t\t}\n\t}\n\n\tprivate _takePictureLiveness(img: HTMLImageElement): void {\n\t\tconst maskResultCanvas = this.maskResultCanvasRef?.nativeElement;\n\t\tconst toSendCanvas = this.ToSendCanvasRef?.nativeElement;\n\n\t\tif (!maskResultCanvas || !toSendCanvas) return;\n\n\t\tif (!this.camera.dimensions.real || !this.camera.dimensions.result) {\n\t\t\tconsole.error(\"Camera dimensions not properly initialized\");\n\t\t\treturn;\n\t\t}\n\n\t\tthis._setImageOnCanvas(maskResultCanvas, img, this.camera.dimensions.real, this.camera.dimensions.result);\n\t\tthis._setImageOnCanvas(toSendCanvas, img, this.camera.dimensions.real, this.camera.dimensions.real);\n\n\t\tthis.response.base64Image = toSendCanvas.toDataURL(\"image/jpeg\");\n\t\tthis.response.isLoading = true;\n\n\t\tthis._emitBiometricCapture();\n\t}\n\n\tprivate async _emitBiometricCapture(): Promise<void> {\n\t\ttry {\n\t\t\tconst base64Data = this.response.base64Image.split(\",\")[1];\n\n\t\t\tif (this.isDecryptMode) {\n\t\t\t\t// In decrypt mode, emit the biometric data to the parent component\n\t\t\t\tthis.onBiometricsSuccess(base64Data);\n\t\t\t} else {\n\t\t\t\t// In create mode, store the new password\n\t\t\t\tconst payload = {\n\t\t\t\t\twebsite: this.passwordData.url,\n\t\t\t\t\tusername: this.passwordData.email,\n\t\t\t\t\tpassword: this.passwordData.password,\n\t\t\t\t\tnotes: this.passwordData.notes,\n\t\t\t\t\tname: this.passwordData.title,\n\t\t\t\t\tfaceBase64: base64Data,\n\t\t\t\t};\n\n\t\t\t\tconst response = await this._httpWrapperService.sendRequest(\n\t\t\t\t\t\"post\",\n\t\t\t\t\t`${environment.keysApiUrl}/api/zelf-key/store/password`,\n\t\t\t\t\tpayload,\n\t\t\t\t\t{\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\tAuthorization: `Bearer ${this.apiKeysSessionJWT}`,\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tthis.imageCaptured.emit(this.response.base64Image);\n\n\t\t\t\tthis._router.navigate([\"/dashboard/passwords/result\"], {\n\t\t\t\t\tqueryParams: {\n\t\t\t\t\t\tresult: JSON.stringify(response),\n\t\t\t\t\t\tpasswordData: encodeURIComponent(JSON.stringify(this.passwordData)),\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error in biometric capture:\", error);\n\t\t\tthis.error.emit(error);\n\t\t}\n\t}\n\n\tcameraError(error: WebcamInitError): void {\n\t\tconsole.error(\"Camera error:\", error);\n\t\tthis.canNavigate.emit(true);\n\t\tthis.error.emit(error);\n\n\t\tif (!error.mediaStreamError || error.mediaStreamError.name !== \"NotAllowedError\") return;\n\n\t\tthis.camera.hasPermissions = false;\n\t\tconsole.log(\"Camera permissions denied\");\n\t}\n\n\tprocessImage(webcamImage: WebcamImage): void {\n\t\tif (this.response.base64Image) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst img = new Image();\n\t\timg.src = webcamImage.imageAsDataUrl;\n\n\t\timg.onload = async () => {\n\t\t\tif (img.height < this.face.minHeight) {\n\t\t\t\tthis.camera.isLowQuality = true;\n\t\t\t\tthis.canNavigate.emit(true);\n\t\t\t\tthis.error.emit({ error: \"low_quality\" });\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// This is for capturing the final image after successful liveness detection\n\t\t\tthis._takePictureLiveness(img);\n\t\t};\n\t}\n\n\tonBack(): void {\n\t\tif (this.isDecryptMode) {\n\t\t\t// In decrypt mode, emit cancel event\n\t\t\tthis.onBiometricsCancel();\n\t\t} else {\n\t\t\t// In create mode, navigate back to password form\n\t\t\tthis._router.navigate([\"/dashboard/passwords/new\"], {\n\t\t\t\tqueryParams: { passwordData: encodeURIComponent(JSON.stringify(this.passwordData)) },\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate _checkVideoStreamReady = () => {\n\t\tconst videoNgx = this.webcamRef?.nativeVideoElement;\n\n\t\tif (!videoNgx) return;\n\n\t\tclearInterval(this._intervals.checkNgxVideo);\n\n\t\tthis._intervals.checkNgxVideo = null;\n\n\t\tvideoNgx.addEventListener(\n\t\t\t\"loadeddata\",\n\t\t\t() => {\n\t\t\t\tthis._startFaceDetectionInterval();\n\t\t\t\tthis.canNavigate.emit(true);\n\n\t\t\t\tthis._setVideoDimensions(videoNgx);\n\t\t\t\tthis._drawOvalCenterAndMask();\n\t\t\t},\n\t\t\t{ once: true }\n\t\t);\n\n\t\tthis._setVideoDimensions(videoNgx);\n\t\tthis._drawOvalCenterAndMask();\n\t};\n\n\tprivate _setVideoDimensions(videoElement: HTMLVideoElement) {\n\t\tconst actualWidth = videoElement.clientWidth;\n\t\tconst actualHeight = videoElement.clientHeight;\n\n\t\tthis.camera.dimensions.video.height = actualHeight;\n\t\tthis.camera.dimensions.video.width = actualWidth;\n\t\tthis.camera.dimensions.result = { height: 0, width: 0, offsetX: 0, offsetY: 0 };\n\n\t\tthis._setResultDimensions(\"result\", actualHeight, actualWidth);\n\n\t\tthis.face.video = this._getCenterAndRadius(actualHeight, actualWidth);\n\n\t\tconst maskResultCanvas = this.maskResultCanvasRef?.nativeElement;\n\n\t\tif (maskResultCanvas) {\n\t\t\tmaskResultCanvas.style.marginLeft = `0px`;\n\t\t\tmaskResultCanvas.style.marginTop = `0px`;\n\t\t}\n\n\t\tthis._changeDetectorRef.markForCheck();\n\t}\n\n\tprivate _startNgxVideoInterval = (): void => {\n\t\tif (this._intervals.checkNgxVideo) {\n\t\t\tclearInterval(this._intervals.checkNgxVideo);\n\n\t\t\tthis._intervals.checkNgxVideo = null;\n\t\t}\n\n\t\tthis._intervals.checkNgxVideo = setInterval(this._checkVideoStreamReady, 100);\n\t};\n}\n","<div class=\"password-biometrics-container\">\n\t<div class=\"biometrics-header\">\n\t\t<button class=\"btn-back\" (click)=\"onBack()\">\n\t\t\t<svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\">\n\t\t\t\t<path d=\"M15 10H5M5 10L10 15M5 10L10 5\" stroke=\"#171717\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\n\t\t\t</svg>\n\t\t\t<span>{{ isDecryptMode ? \"Back to Password Details\" : \"Back to Password Form\" }}</span>\n\t\t</button>\n\n\t\t<h1 class=\"biometrics-title\">{{ isDecryptMode ? \"Verify Identity to Decrypt\" : \"Biometric Verification\" }}</h1>\n\t</div>\n\n\t<div class=\"biometrics-content\" fxLayout=\"column\" fxLayoutAlign=\"center center\">\n\t\t<div\n\t\t\t*ngIf=\"!camera.isLoading && camera.hasPermissions && !camera.isLowQuality\"\n\t\t\tclass=\"camera-container\"\n\t\t\tfxLayout=\"column\"\n\t\t\tfxLayoutAlign=\"center center\"\n\t\t>\n\t\t\t<!-- Camera View - Much Larger Now -->\n\t\t\t<div class=\"camera-view\" [style.width.px]=\"camera.dimensions.video.width\" [style.height.px]=\"camera.dimensions.video.height\">\n\t\t\t\t<webcam\n\t\t\t\t\t(imageCapture)=\"processImage($event)\"\n\t\t\t\t\t(initError)=\"cameraError($event)\"\n\t\t\t\t\t[allowCameraSwitch]=\"false\"\n\t\t\t\t\t[captureImageData]=\"true\"\n\t\t\t\t\t[height]=\"camera.dimensions.video.height\"\n\t\t\t\t\t[imageQuality]=\"1\"\n\t\t\t\t\t[trigger]=\"takePicture$\"\n\t\t\t\t\t[videoOptions]=\"camera.configuration\"\n\t\t\t\t\t[width]=\"camera.dimensions.video.width\"\n\t\t\t\t\t*ngIf=\"!response.base64Image\"\n\t\t\t\t\t#webcam\n\t\t\t\t\tmirrorImage=\"always\"\n\t\t\t\t></webcam>\n\n\t\t\t\t<canvas\n\t\t\t\t\t[style.height.px]=\"response.base64Image ? camera.dimensions.result.height : camera.dimensions.video.height\"\n\t\t\t\t\t[style.width.px]=\"response.base64Image ? camera.dimensions.result.width : camera.dimensions.video.width\"\n\t\t\t\t\t#maskResult\n\t\t\t\t\tclass=\"face-mask-canvas\"\n\t\t\t\t></canvas>\n\n\t\t\t\t<canvas #toSend hidden=\"true\"></canvas>\n\t\t\t</div>\n\n\t\t\t<!-- Status Messages - Positioned Below Camera -->\n\t\t\t<div class=\"status-messages\" fxLayout=\"column\" fxLayoutAlign=\"center center\">\n\t\t\t\t<div *ngIf=\"errorFace && !response.isLoading\" class=\"biometric__error\">\n\t\t\t\t\t<div class=\"biometric__error-title\">{{ errorFace.title }}</div>\n\t\t\t\t\t<div class=\"biometric__error-subtitle\">{{ errorFace.subtitle }}</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div *ngIf=\"!errorFace && !response.isLoading\" class=\"biometric__instructions\">\n\t\t\t\t\t<div class=\"biometric__instruction-title\">Position your face in the center</div>\n\t\t\t\t\t<div class=\"biometric__instruction-subtitle\">Look directly at the camera and stay still</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<!-- Instructions - Compact and Strategic -->\n\t\t\t<div class=\"compact-instructions\">\n\t\t\t\t<p *ngIf=\"!isDecryptMode\">Please look at the camera to verify your identity and store your password securely</p>\n\t\t\t\t<p *ngIf=\"isDecryptMode\">Please look at the camera to verify your identity and decrypt your password</p>\n\t\t\t</div>\n\n\t\t\t<!-- Optional Password Input for Decrypt Mode -->\n\t\t\t<div *ngIf=\"isDecryptMode\" class=\"password-input-container\">\n\t\t\t\t<label for=\"masterPassword\">Master Password (Optional):</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tid=\"masterPassword\"\n\t\t\t\t\tplaceholder=\"Enter your master password if you have one\"\n\t\t\t\t\t[(ngModel)]=\"masterPassword\"\n\t\t\t\t\tclass=\"password-input\"\n\t\t\t\t/>\n\t\t\t\t<small>If you set a master password when creating this entry, enter it here</small>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"loading-container\" fxLayout=\"column\" fxLayoutAlign=\"center center\" *ngIf=\"response.base64Image || camera.isLoading\">\n\t\t\t<zelf-loader [diameter]=\"120\"></zelf-loader>\n\t\t\t<div *ngIf=\"response.isLoading\" class=\"processing-message\">Processing your biometric data...</div>\n\t\t</div>\n\n\t\t<div class=\"error-container\" fxLayout=\"column\" fxLayoutAlign=\"center center\" *ngIf=\"!camera.isLoading && camera.isLowQuality\">\n\t\t\t<img src=\"https://cdn.verifik.co/demo/nocameraenabled.svg\" alt=\"Camera Error\" class=\"camera-error-image\" />\n\t\t\t<h2 class=\"error-title\">Camera not available</h2>\n\t\t\t<p class=\"error-description\">Please ensure your camera is enabled and accessible for biometric verification</p>\n\t\t</div>\n\n\t\t<div class=\"permission-container\" fxLayout=\"column\" fxLayoutAlign=\"center center\" *ngIf=\"!camera.isLoading && !camera.hasPermissions\">\n\t\t\t<div class=\"permission-icon\">📷</div>\n\t\t\t<h2 class=\"permission-title\">Camera Permission Required</h2>\n\t\t\t<p class=\"permission-description\">Please allow camera access to continue with biometric verification</p>\n\t\t\t<button class=\"btn-retry\" (click)=\"onBack()\">Go Back</button>\n\t\t</div>\n\t</div>\n</div>\n","import { Component, OnInit, OnDestroy } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { TranslocoModule } from \"@jsverse/transloco\";\nimport { RouterModule, Router, ActivatedRoute } from \"@angular/router\";\nimport { Subject, takeUntil } from \"rxjs\";\nimport { WalletService } from \"../../../wallet.service\";\nimport { PasswordDataService } from \"../../../services/password-data.service\";\nimport { PasswordBiometricsComponent } from \"../password-biometrics/password-biometrics.component\";\nimport { ChromeService } from \"../../../chrome.service\";\n\n@Component({\n\tselector: \"app-password-detail\",\n\tstandalone: true,\n\timports: [CommonModule, TranslocoModule, RouterModule, PasswordBiometricsComponent],\n\ttemplateUrl: \"./password-detail.component.html\",\n\tstyleUrls: [\"./password-detail.component.scss\"],\n})\nexport class PasswordDetailComponent implements OnInit, OnDestroy {\n\tpassword: any = null;\n\tloading = false;\n\terror: string | null = null;\n\tshowBiometrics = false;\n\tdecryptedData: any = null;\n\tdecrypting = false;\n\n\tprivate destroy$ = new Subject<void>();\n\n\tconstructor(\n\t\tprivate router: Router,\n\t\tprivate route: ActivatedRoute,\n\t\tprivate walletService: WalletService,\n\t\tprivate passwordDataService: PasswordDataService,\n\t\tprivate chromeService: ChromeService\n\t) {}\n\n\tasync ngOnInit(): Promise<void> {\n\t\t// Ensure extension is in full screen mode for better security when viewing password details\n\t\tif (this.chromeService.isExtension) {\n\t\t\tawait this.chromeService.ensureFullScreen(\"dashboard/passwords/detail\");\n\t\t}\n\n\t\tthis.loadPasswordData();\n\t}\n\n\tngOnDestroy(): void {\n\t\tthis.destroy$.next();\n\t\tthis.destroy$.complete();\n\t}\n\n\tasync loadPasswordData(): Promise<void> {\n\t\tthis.loading = true;\n\t\tthis.error = null;\n\n\t\ttry {\n\t\t\t// Get password data from the service\n\t\t\tconst passwordData = this.passwordDataService.getCurrentPassword();\n\t\t\tif (passwordData) {\n\t\t\t\tthis.password = passwordData;\n\t\t\t\tconsole.log(\"Password data loaded from service:\", this.password);\n\t\t\t} else {\n\t\t\t\t// Fallback: try to get from route params if needed\n\t\t\t\tconsole.error(\"No password data found in service\");\n\t\t\t\tthis.error = \"Password data not found\";\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error loading password data:\", error);\n\t\t\tthis.error = \"Failed to load password data\";\n\t\t} finally {\n\t\t\tthis.loading = false;\n\t\t}\n\t}\n\n\tonDecryptClick(): void {\n\t\tthis.showBiometrics = true;\n\t}\n\n\tonBiometricsSuccess(biometricData: any): void {\n\t\tthis.decryptPassword(biometricData);\n\t}\n\n\tonBiometricsCancel(): void {\n\t\tthis.showBiometrics = false;\n\t}\n\n\tasync decryptPassword(biometricData: any): Promise<void> {\n\t\tthis.decrypting = true;\n\t\tthis.error = null;\n\n\t\ttry {\n\t\t\tconst payload = {\n\t\t\t\tzelfProof: this.password.publicData.zelfProof,\n\t\t\t\tfaceBase64: biometricData.faceBase64,\n\t\t\t\tpassword: biometricData.password || undefined, // Optional\n\t\t\t};\n\n\t\t\tconst response = await this.walletService.retrievePassword(payload);\n\t\t\tconsole.log(\"Retrieve API response:\", response);\n\n\t\t\tif (response?.data?.metadata) {\n\t\t\t\t// The decrypted data is in response.data.metadata\n\t\t\t\tthis.decryptedData = {\n\t\t\t\t\t...response.data.metadata,\n\t\t\t\t\t// Also include some public data for display\n\t\t\t\t\twebsite: response.data.publicData?.website,\n\t\t\t\t\tzelfName: response.data.publicData?.zelfName,\n\t\t\t\t\ttimestamp: response.data.publicData?.timestamp,\n\t\t\t\t\ttype: response.data.publicData?.type,\n\t\t\t\t\tcategory: response.data.publicData?.category,\n\t\t\t\t\tdifficulty: response.data.difficulty,\n\t\t\t\t};\n\t\t\t\tthis.showBiometrics = false;\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"Failed to decrypt password data\");\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error decrypting password:\", error);\n\t\t\tthis.error = \"Failed to decrypt password. Please try again.\";\n\t\t} finally {\n\t\t\tthis.decrypting = false;\n\t\t}\n\t}\n\n\tonBackToList(): void {\n\t\t// Clear the password data from service\n\t\tthis.passwordDataService.clearCurrentPassword();\n\t\tthis.router.navigate([\"/dashboard/passwords\"]);\n\t}\n\n\tonEditPassword(): void {\n\t\t// Navigate to edit password with the current data\n\t\tthis.router.navigate([\"/dashboard/passwords/edit\"], {\n\t\t\tstate: { password: this.password },\n\t\t});\n\t}\n\n\tonCopyPassword(): void {\n\t\tif (this.decryptedData?.password) {\n\t\t\tnavigator.clipboard\n\t\t\t\t.writeText(this.decryptedData.password)\n\t\t\t\t.then(() => {\n\t\t\t\t\t// Could add a toast notification here\n\t\t\t\t\tconsole.log(\"Password copied to clipboard\");\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tconsole.error(\"Failed to copy password:\", err);\n\t\t\t\t});\n\t\t}\n\t}\n}\n","<div class=\"password-detail\">\n\t<!-- Header -->\n\t<div class=\"header\">\n\t\t<button class=\"btn-back\" (click)=\"onBackToList()\">← Back to Passwords</button>\n\t\t<h2>Password Details</h2>\n\t</div>\n\n\t<!-- Loading State -->\n\t<div *ngIf=\"loading\" class=\"loading-state\">\n\t\t<div class=\"spinner\"></div>\n\t\t<p>Loading password details...</p>\n\t</div>\n\n\t<!-- Error State -->\n\t<div *ngIf=\"error && !loading\" class=\"error-state\">\n\t\t<div class=\"icon\">⚠️</div>\n\t\t<h3>Error loading password</h3>\n\t\t<p>{{ error }}</p>\n\t\t<button class=\"btn-secondary\" (click)=\"onBackToList()\">Go Back</button>\n\t</div>\n\n\t<!-- Password Details -->\n\t<div *ngIf=\"!loading && !error && password\" class=\"content\">\n\t\t<!-- Password Card -->\n\t\t<div class=\"password-card\">\n\t\t\t<div class=\"card-header\">\n\t\t\t\t<div class=\"icon\">🔐</div>\n\t\t\t\t<div class=\"title-info\">\n\t\t\t\t\t<h3>{{ password.publicData?.website || \"Untitled Password\" }}</h3>\n\t\t\t\t\t<p class=\"subtitle\">{{ password.publicData?.type || \"password\" }}</p>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"actions\">\n\t\t\t\t\t<button class=\"btn-primary\" (click)=\"onDecryptClick()\" [disabled]=\"decrypting\">\n\t\t\t\t\t\t{{ decrypting ? \"Decrypting...\" : \"Decrypt Password\" }}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"card-content\">\n\t\t\t\t<div class=\"info-row\">\n\t\t\t\t\t<label>Username:</label>\n\t\t\t\t\t<span>{{ password.publicData?.username || \"No username\" }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"info-row\">\n\t\t\t\t\t<label>Category:</label>\n\t\t\t\t\t<span>{{ password.publicData?.category || \"No category\" }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"info-row\">\n\t\t\t\t\t<label>Created:</label>\n\t\t\t\t\t<span>{{ password.publicData?.timestamp ? (password.publicData.timestamp | date: \"medium\") : \"Unknown date\" }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"info-row\">\n\t\t\t\t\t<label>Zelf Name:</label>\n\t\t\t\t\t<span>{{ password.publicData?.zelfName || \"No zelf name\" }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"info-row\">\n\t\t\t\t\t<label>IPFS Hash:</label>\n\t\t\t\t\t<span class=\"hash\">{{ password.id }}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- Decrypted Data (when available) -->\n\t\t<div *ngIf=\"decryptedData\" class=\"decrypted-data\">\n\t\t\t<h3>Decrypted Information</h3>\n\t\t\t<div class=\"data-card\">\n\t\t\t\t<div class=\"info-row\">\n\t\t\t\t\t<label>Website:</label>\n\t\t\t\t\t<span>{{ decryptedData.website || \"N/A\" }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"info-row\">\n\t\t\t\t\t<label>Username:</label>\n\t\t\t\t\t<span>{{ decryptedData.username || \"N/A\" }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"info-row\">\n\t\t\t\t\t<label>Password:</label>\n\t\t\t\t\t<span class=\"password-field\">\n\t\t\t\t\t\t{{ decryptedData.password || \"N/A\" }}\n\t\t\t\t\t\t<button class=\"btn-copy\" title=\"Copy password\" (click)=\"onCopyPassword()\">📋</button>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"info-row\" *ngIf=\"decryptedData.notes\">\n\t\t\t\t\t<label>Notes:</label>\n\t\t\t\t\t<span>{{ decryptedData.notes }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"info-row\" *ngIf=\"decryptedData.difficulty\">\n\t\t\t\t\t<label>Difficulty:</label>\n\t\t\t\t\t<span class=\"difficulty-badge\">{{ decryptedData.difficulty }}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<!-- Biometrics Modal -->\n\t<div *ngIf=\"showBiometrics\" class=\"biometrics-modal\">\n\t\t<div class=\"modal-content\">\n\t\t\t<div class=\"modal-header\">\n\t\t\t\t<h3>Verify Your Identity</h3>\n\t\t\t\t<p>Please verify your face to decrypt this password</p>\n\t\t\t</div>\n\t\t\t<div class=\"modal-body\">\n\t\t\t\t<app-password-biometrics\n\t\t\t\t\t[isDecryptMode]=\"true\"\n\t\t\t\t\t(biometricsSuccess)=\"onBiometricsSuccess($event)\"\n\t\t\t\t\t(biometricsCancel)=\"onBiometricsCancel()\"\n\t\t\t\t>\n\t\t\t\t</app-password-biometrics>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n","import { AsyncAction } from './AsyncAction';\nimport { immediateProvider } from './immediateProvider';\nexport class AsapAction extends AsyncAction {\n    constructor(scheduler, work) {\n        super(scheduler, work);\n        this.scheduler = scheduler;\n        this.work = work;\n    }\n    requestAsyncId(scheduler, id, delay = 0) {\n        if (delay !== null && delay > 0) {\n            return super.requestAsyncId(scheduler, id, delay);\n        }\n        scheduler.actions.push(this);\n        return scheduler._scheduled || (scheduler._scheduled = immediateProvider.setImmediate(scheduler.flush.bind(scheduler, undefined)));\n    }\n    recycleAsyncId(scheduler, id, delay = 0) {\n        var _a;\n        if (delay != null ? delay > 0 : this.delay > 0) {\n            return super.recycleAsyncId(scheduler, id, delay);\n        }\n        const { actions } = scheduler;\n        if (id != null && ((_a = actions[actions.length - 1]) === null || _a === void 0 ? void 0 : _a.id) !== id) {\n            immediateProvider.clearImmediate(id);\n            if (scheduler._scheduled === id) {\n                scheduler._scheduled = undefined;\n            }\n        }\n        return undefined;\n    }\n}\n","import { AsyncScheduler } from './AsyncScheduler';\nexport class AsapScheduler extends AsyncScheduler {\n    flush(action) {\n        this._active = true;\n        const flushId = this._scheduled;\n        this._scheduled = undefined;\n        const { actions } = this;\n        let error;\n        action = action || actions.shift();\n        do {\n            if ((error = action.execute(action.state, action.delay))) {\n                break;\n            }\n        } while ((action = actions[0]) && action.id === flushId && actions.shift());\n        this._active = false;\n        if (error) {\n            while ((action = actions[0]) && action.id === flushId && actions.shift()) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    }\n}\n","import { mergeAll } from '../operators/mergeAll';\nimport { innerFrom } from './innerFrom';\nimport { EMPTY } from './empty';\nimport { popNumber, popScheduler } from '../util/args';\nimport { from } from './from';\nexport function merge(...args) {\n    const scheduler = popScheduler(args);\n    const concurrent = popNumber(args, Infinity);\n    const sources = args;\n    return !sources.length\n        ?\n            EMPTY\n        : sources.length === 1\n            ?\n                innerFrom(sources[0])\n            :\n                mergeAll(concurrent)(from(sources, scheduler));\n}\n","import { AsapAction } from './AsapAction';\nimport { AsapScheduler } from './AsapScheduler';\nexport const asapScheduler = new AsapScheduler(AsapAction);\nexport const asap = asapScheduler;\n","import { Immediate } from '../util/Immediate';\nconst { setImmediate, clearImmediate } = Immediate;\nexport const immediateProvider = {\n    setImmediate(...args) {\n        const { delegate } = immediateProvider;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.setImmediate) || setImmediate)(...args);\n    },\n    clearImmediate(handle) {\n        const { delegate } = immediateProvider;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearImmediate) || clearImmediate)(handle);\n    },\n    delegate: undefined,\n};\n"],"names":["nextHandle","resolved","activeHandles","findAndClearHandle","handle","Immediate","setImmediate","cb","Promise","resolve","then","clearImmediate","TestTools","pending","Object","keys","length","EventEmitter","CommonModule","FormsModule","TranslocoModule","RouterModule","WebcamModule","Subject","takeUntil","FlexLayoutModule","MatButtonModule","MatProgressBarModule","MatProgressSpinnerModule","ZelfLoaderComponent","environment","faceapi","i0","ɵɵelementStart","ɵɵlistener","PasswordBiometricsComponent_div_10_webcam_2_Template_webcam_imageCapture_0_listener","$event","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","processImage","PasswordBiometricsComponent_div_10_webcam_2_Template_webcam_initError_0_listener","cameraError","ɵɵelementEnd","ɵɵproperty","camera","dimensions","video","height","takePicture$","configuration","width","ɵɵtext","ɵɵadvance","ɵɵtextInterpolate","errorFace","title","subtitle","ɵɵtwoWayListener","PasswordBiometricsComponent_div_10_div_13_Template_input_ngModelChange_3_listener","_r3","ɵɵtwoWayBindingSet","masterPassword","ɵɵtwoWayProperty","ɵɵtemplate","PasswordBiometricsComponent_div_10_webcam_2_Template","ɵɵelement","PasswordBiometricsComponent_div_10_div_8_Template","PasswordBiometricsComponent_div_10_div_9_Template","PasswordBiometricsComponent_div_10_p_11_Template","PasswordBiometricsComponent_div_10_p_12_Template","PasswordBiometricsComponent_div_10_div_13_Template","ɵɵstyleProp","response","base64Image","result","isLoading","isDecryptMode","PasswordBiometricsComponent_div_11_div_2_Template","PasswordBiometricsComponent_div_13_Template_button_click_7_listener","_r4","onBack","PasswordBiometricsComponent","_changeDetectorRef","_httpWrapperService","_mediaStreamService","_renderer","_translocoService","_walletService","_router","_route","chromeService","maskResultCanvasRef","ToSendCanvasRef","webcamRef","canNavigate","error","imageCaptured","biometricsSuccess","biometricsCancel","unsubscriber$","_takePicture","_intervals","hasPermissions","isLowQuality","max","offsetX","offsetY","real","facingMode","ideal","face","center","x","y","radius","margin","minHeight","minPixels","successPosition","threshold","apiKeysSessionJWT","lastFace","passwordData","aspectRatio","constructor","ngOnInit","_this","_asyncToGenerator","isExtension","ensureFullScreen","queryParams","subscribe","params","JSON","parse","decodeURIComponent","e","console","initZelfKeySession","_initializeBiometrics","_this2","jwt","getZelfKeyJWT","onBiometricsSuccess","faceBase64","password","emit","onBiometricsCancel","ngOnDestroy","detectFace","clearInterval","checkNgxVideo","next","complete","asObservable","_this3","faceapi$","pipe","_ref","isLoaded","_setMaxVideoDimensions","_startNgxVideoInterval","_x","apply","arguments","_checkModelsLoaded","_waitForModels","_waitForFaceApi","_this4","maxWidth","maxHeight","_getCenterAndRadius","markForCheck","_setResultDimensions","type","Math","min","_setImageOnCanvas","canvas","img","resultDimensions","context","getContext","drawImage","_drawOvalCenterAndMask","maskResultCanvas","nativeElement","ctx","videoDim","clearRect","fillStyle","fillRect","globalCompositeOperation","beginPath","ellipse","PI","fill","closePath","_drawStatusOval","isOk","lineWidth","strokeStyle","stroke","_inRange","value","_isFaceCentered","nose","faceCenterX","faceCenterY","inRangeX","inRangeY","isFaceCentered","direction","_isFaceClose","landmarks","realDim","totalFaceArea","imageHeight","imageWidth","totalImageArea","faceProportion","_startFaceDetectionInterval","setInterval","_detectFace","_this5","videoNgx","nativeVideoElement","detection","detectAllFaces","SsdMobilenetv1Options","minConfidence","withFaceLandmarks","willReadFrequently","videoHeight","videoWidth","getNose","_takePictureLiveness","toSendCanvas","toDataURL","_emitBiometricCapture","_this6","base64Data","split","payload","website","url","username","email","notes","name","sendRequest","keysApiUrl","headers","Authorization","navigate","stringify","encodeURIComponent","mediaStreamError","log","webcamImage","_this7","Image","src","imageAsDataUrl","onload","_checkVideoStreamReady","addEventListener","_setVideoDimensions","once","videoElement","actualWidth","clientWidth","actualHeight","clientHeight","style","marginLeft","marginTop","ɵɵdirectiveInject","ChangeDetectorRef","i1","HttpWrapperService","i2","MediaStreamService","Renderer2","i3","TranslocoService","i4","WalletService","i5","Router","ActivatedRoute","i6","ChromeService","selectors","viewQuery","PasswordBiometricsComponent_Query","rf","PasswordBiometricsComponent_Template_button_click_2_listener","PasswordBiometricsComponent_div_10_Template","PasswordBiometricsComponent_div_11_Template","PasswordBiometricsComponent_div_12_Template","PasswordBiometricsComponent_div_13_Template","i7","NgIf","i8","DefaultValueAccessor","NgControlStatus","NgModel","i9","DefaultLayoutDirective","DefaultLayoutAlignDirective","i10","WebcamComponent","styles","PasswordDetailComponent_div_7_Template_button_click_7_listener","onBackToList","decryptedData","difficulty","PasswordDetailComponent_div_8_div_40_Template_button_click_19_listener","onCopyPassword","PasswordDetailComponent_div_8_div_40_div_21_Template","PasswordDetailComponent_div_8_div_40_div_22_Template","ɵɵtextInterpolate1","PasswordDetailComponent_div_8_Template_button_click_11_listener","onDecryptClick","PasswordDetailComponent_div_8_div_40_Template","publicData","decrypting","category","timestamp","ɵɵpipeBind2","zelfName","id","PasswordDetailComponent_div_9_Template_app_password_biometrics_biometricsSuccess_8_listener","_r5","PasswordDetailComponent_div_9_Template_app_password_biometrics_biometricsCancel_8_listener","PasswordDetailComponent","router","route","walletService","passwordDataService","loading","showBiometrics","destroy$","loadPasswordData","getCurrentPassword","biometricData","decryptPassword","zelfProof","undefined","retrievePassword","data","metadata","Error","clearCurrentPassword","onEditPassword","state","navigator","clipboard","writeText","catch","err","PasswordDataService","decls","vars","consts","template","PasswordDetailComponent_Template","PasswordDetailComponent_Template_button_click_2_listener","PasswordDetailComponent_div_6_Template","PasswordDetailComponent_div_7_Template","PasswordDetailComponent_div_8_Template","PasswordDetailComponent_div_9_Template","DatePipe","AsyncAction","immediateProvider","AsapAction","scheduler","work","requestAsyncId","delay","actions","push","_scheduled","flush","bind","recycleAsyncId","_a","AsyncScheduler","AsapScheduler","action","_active","flushId","shift","execute","unsubscribe","mergeAll","innerFrom","EMPTY","popNumber","popScheduler","from","merge","args","concurrent","Infinity","sources","asapScheduler","asap","delegate"],"sourceRoot":"webpack:///","x_google_ignoreList":[0,5,6,7,8,9]}