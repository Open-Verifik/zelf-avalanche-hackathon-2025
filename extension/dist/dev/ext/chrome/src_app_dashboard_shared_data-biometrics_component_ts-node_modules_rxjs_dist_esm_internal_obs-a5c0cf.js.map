{"version":3,"file":"src_app_dashboard_shared_data-biometrics_component_ts-node_modules_rxjs_dist_esm_internal_obs-a5c0cf.js","mappings":"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","sources":["./node_modules/rxjs/dist/esm/internal/util/Immediate.js","./src/app/dashboard/shared/data-biometrics.component.ts","./src/app/dashboard/shared/data-biometrics.component.html","./node_modules/rxjs/dist/esm/internal/scheduler/AsapAction.js","./node_modules/rxjs/dist/esm/internal/scheduler/AsapScheduler.js","./node_modules/rxjs/dist/esm/internal/observable/merge.js","./node_modules/rxjs/dist/esm/internal/scheduler/asap.js","./node_modules/rxjs/dist/esm/internal/scheduler/immediateProvider.js"],"sourcesContent":["let nextHandle = 1;\nlet resolved;\nconst activeHandles = {};\nfunction findAndClearHandle(handle) {\n    if (handle in activeHandles) {\n        delete activeHandles[handle];\n        return true;\n    }\n    return false;\n}\nexport const Immediate = {\n    setImmediate(cb) {\n        const handle = nextHandle++;\n        activeHandles[handle] = true;\n        if (!resolved) {\n            resolved = Promise.resolve();\n        }\n        resolved.then(() => findAndClearHandle(handle) && cb());\n        return handle;\n    },\n    clearImmediate(handle) {\n        findAndClearHandle(handle);\n    },\n};\nexport const TestTools = {\n    pending() {\n        return Object.keys(activeHandles).length;\n    }\n};\n","import { Component, OnInit, OnDestroy, EventEmitter, Output, ViewChild, ElementRef, ChangeDetectorRef, Renderer2, Input } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { FormsModule } from \"@angular/forms\";\nimport { TranslocoModule, TranslocoService } from \"@jsverse/transloco\";\nimport { RouterModule, Router, ActivatedRoute } from \"@angular/router\";\nimport { WebcamComponent, WebcamImage, WebcamInitError, WebcamModule } from \"ngx-webcam\";\nimport { Subject, takeUntil, Observable } from \"rxjs\";\nimport { FlexLayoutModule } from \"@angular/flex-layout\";\nimport { MatButtonModule } from \"@angular/material/button\";\nimport { MatProgressBarModule } from \"@angular/material/progress-bar\";\nimport { MatProgressSpinnerModule } from \"@angular/material/progress-spinner\";\nimport { ZelfLoaderComponent } from \"app/zelf-loader/zelf-loader.component\";\nimport { HttpWrapperService } from \"app/http-wrapper.service\";\nimport { MediaStreamService } from \"app/services/media-stream.service\";\nimport { WalletService } from \"../../wallet.service\";\nimport { environment } from \"environments/environment\";\nimport * as faceapi from \"@vladmandic/face-api\";\nimport { ChromeService } from \"../../chrome.service\";\nimport { DataPassingService } from \"../../services/data-passing.service\";\n\nexport interface BiometricData {\n\tfaceBase64: string;\n\tpassword?: string;\n}\n\n@Component({\n\tselector: \"app-data-biometrics\",\n\tstandalone: true,\n\timports: [\n\t\tCommonModule,\n\t\tFormsModule,\n\t\tFlexLayoutModule,\n\t\tMatButtonModule,\n\t\tMatProgressBarModule,\n\t\tMatProgressSpinnerModule,\n\t\tTranslocoModule,\n\t\tWebcamModule,\n\t\tZelfLoaderComponent,\n\t\tRouterModule,\n\t],\n\ttemplateUrl: \"./data-biometrics.component.html\",\n\tstyleUrls: [\"./data-biometrics.component.scss\"],\n})\nexport class DataBiometricsComponent implements OnInit, OnDestroy {\n\t@ViewChild(\"maskResult\", { static: false }) public maskResultCanvasRef: ElementRef | undefined;\n\t@ViewChild(\"toSend\", { static: false }) public ToSendCanvasRef: ElementRef | undefined;\n\t@ViewChild(\"webcam\", { static: false }) public webcamRef?: WebcamComponent;\n\n\t@Input() isDecryptMode: boolean = false;\n\t@Output() canNavigate: EventEmitter<boolean> = new EventEmitter<boolean>();\n\t@Output() error: EventEmitter<any> = new EventEmitter<any>();\n\t@Output() imageCaptured: EventEmitter<string> = new EventEmitter<string>();\n\t@Output() biometricsSuccess: EventEmitter<BiometricData> = new EventEmitter<BiometricData>();\n\t@Output() biometricsCancel: EventEmitter<void> = new EventEmitter<void>();\n\n\tprivate unsubscriber$: Subject<void> = new Subject<void>();\n\tprivate _takePicture: Subject<void> = new Subject<void>();\n\tprivate _intervals: any = {};\n\n\t// Camera and face detection properties\n\tcamera = {\n\t\tisLoading: true,\n\t\thasPermissions: true,\n\t\tisLowQuality: false,\n\t\tdimensions: {\n\t\t\tvideo: { width: 0, height: 0, max: { width: 800, height: 600 } },\n\t\t\tresult: { width: 0, height: 0, offsetX: 0, offsetY: 0 },\n\t\t\treal: { width: 0, height: 0, offsetX: 0, offsetY: 0 },\n\t\t} as { [key: string]: { width: number; height: number; offsetX?: number; offsetY?: number; max?: { width: number; height: number } } },\n\t\tconfiguration: {\n\t\t\tfacingMode: \"user\",\n\t\t\twidth: { ideal: 800 },\n\t\t\theight: { ideal: 600 },\n\t\t},\n\t};\n\n\tface = {\n\t\tvideo: { center: { x: 0, y: 0 }, radius: { x: 0, y: 0 }, margin: { x: 0, y: 0 } },\n\t\treal: { center: { x: 0, y: 0 }, radius: { x: 0, y: 0 }, margin: { x: 0, y: 0 } },\n\t\tminHeight: 200,\n\t\tminPixels: 200,\n\t\tsuccessPosition: 0,\n\t\tthreshold: 0.25,\n\t};\n\n\tresponse = {\n\t\tbase64Image: \"\",\n\t\tisLoading: false,\n\t};\n\tapiKeysSessionJWT: string;\n\terrorFace: any = null;\n\tlastFace: any;\n\titemData: any = {};\n\taspectRatio = 0.75;\n\tmasterPassword: string = \"\";\n\n\t// Category-specific properties\n\tdataType: string = \"\";\n\tdataTitle: string = \"\";\n\tuseMasterPassword: boolean = false;\n\n\tconstructor(\n\t\tprivate _changeDetectorRef: ChangeDetectorRef,\n\t\tprivate _httpWrapperService: HttpWrapperService,\n\t\tprivate _mediaStreamService: MediaStreamService,\n\t\tprivate _renderer: Renderer2,\n\t\tprivate _translocoService: TranslocoService,\n\t\tprivate _walletService: WalletService,\n\t\tprivate _router: Router,\n\t\tprivate _route: ActivatedRoute,\n\t\tprivate chromeService: ChromeService,\n\t\tprivate dataPassingService: DataPassingService\n\t) {\n\t\tthis.apiKeysSessionJWT = \"\";\n\t}\n\n\tasync ngOnInit(): Promise<void> {\n\t\t// First, get the dataType from the route path\n\t\tconst currentPath = this._router.url;\n\n\t\tif (currentPath.includes(\"/notes/\")) {\n\t\t\tthis.dataType = \"notes\";\n\t\t\tthis.dataTitle = \"Note\";\n\t\t} else if (currentPath.includes(\"/passwords/\")) {\n\t\t\tthis.dataType = \"passwords\";\n\t\t\tthis.dataTitle = \"Password\";\n\t\t} else if (currentPath.includes(\"/addresses/\")) {\n\t\t\tthis.dataType = \"addresses\";\n\t\t\tthis.dataTitle = \"Address\";\n\t\t} else if (currentPath.includes(\"/payment-cards/\")) {\n\t\t\tthis.dataType = \"payment-cards\";\n\t\t\tthis.dataTitle = \"Payment Card\";\n\t\t} else if (currentPath.includes(\"/bank-accounts/\")) {\n\t\t\tthis.dataType = \"bank-accounts\";\n\t\t\tthis.dataTitle = \"Bank Account\";\n\t\t}\n\n\t\t// Ensure extension is in full screen mode for better security during biometric authentication\n\t\tif (this.chromeService.isExtension) {\n\t\t\tawait this.chromeService.ensureFullScreen(`dashboard/${this.dataType}/biometrics`);\n\t\t}\n\n\t\t// Get data from service instead of query params\n\t\tthis._getDataFromService();\n\n\t\t// Initialize ZelfKey session\n\t\tthis.initZelfKeySession();\n\n\t\t// Initialize biometric verification\n\t\tthis._initializeBiometrics();\n\t}\n\n\t/**\n\t * Get data from the data passing service\n\t */\n\tprivate _getDataFromService(): void {\n\t\t// Get data from service based on data type\n\t\tconst serviceData = this.dataPassingService.getData(this.dataType);\n\n\t\tif (serviceData) {\n\t\t\tthis.itemData = serviceData;\n\n\t\t\t// Set master password if available\n\t\t\tif ((this.dataType === \"notes\" || this.dataType === \"passwords\") && this.itemData.masterPassword) {\n\t\t\t\tthis.masterPassword = this.itemData.masterPassword;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.itemData = {};\n\t\t}\n\t}\n\n\tngOnDestroy(): void {\n\t\tif (this._intervals.detectFace) {\n\t\t\tclearInterval(this._intervals.detectFace);\n\t\t}\n\t\tif (this._intervals.checkNgxVideo) {\n\t\t\tclearInterval(this._intervals.checkNgxVideo);\n\t\t}\n\t\tthis.unsubscriber$.next();\n\t\tthis.unsubscriber$.complete();\n\t}\n\n\tget takePicture$(): Observable<void> {\n\t\treturn this._takePicture.asObservable();\n\t}\n\n\tasync initZelfKeySession(): Promise<void> {\n\t\t// The wallet service now caches the JWT token\n\t\tawait this._walletService.initZelfKeySession();\n\n\t\t// Get the cached token\n\t\tconst jwt = this._walletService.getZelfKeyJWT();\n\n\t\tif (jwt) {\n\t\t\tthis.apiKeysSessionJWT = jwt;\n\t\t}\n\t}\n\n\t/**\n\t * Handle successful biometrics verification in decrypt mode\n\t */\n\tonBiometricsSuccess(faceBase64: string, password?: string): void {\n\t\tif (this.isDecryptMode) {\n\t\t\tthis.biometricsSuccess.emit({\n\t\t\t\tfaceBase64,\n\t\t\t\tpassword: this.masterPassword || password,\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Handle biometrics cancellation in decrypt mode\n\t */\n\tonBiometricsCancel(): void {\n\t\tif (this.isDecryptMode) {\n\t\t\tthis.biometricsCancel.emit();\n\t\t}\n\t}\n\n\t/**\n\t * Toggle master password input visibility\n\t */\n\ttoggleMasterPassword(): void {\n\t\tthis.useMasterPassword = !this.useMasterPassword;\n\t\tif (!this.useMasterPassword) {\n\t\t\tthis.masterPassword = \"\"; // Clear password when toggling off\n\t\t}\n\t}\n\n\tprivate async _initializeBiometrics(): Promise<void> {\n\t\ttry {\n\t\t\t// Always wait for the wallet service to load the models\n\t\t\tthis._walletService.faceapi$.pipe(takeUntil(this.unsubscriber$)).subscribe(async (isLoaded) => {\n\t\t\t\tif (!isLoaded) return;\n\n\t\t\t\tthis.camera.isLoading = false;\n\t\t\t\tawait this._setMaxVideoDimensions();\n\t\t\t\tthis._startNgxVideoInterval();\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tconsole.error(\"❌ Error initializing biometrics:\", error);\n\t\t\tthis.error.emit(error);\n\t\t}\n\t}\n\n\tprivate async _setMaxVideoDimensions(): Promise<void> {\n\t\tconst maxWidth = 800;\n\t\tconst maxHeight = 600;\n\n\t\t// Set initial video dimensions\n\t\tthis.camera.dimensions.video.width = maxWidth;\n\t\tthis.camera.dimensions.video.height = maxHeight;\n\n\t\t// Set result dimensions\n\t\tthis.camera.dimensions.result.width = maxWidth;\n\t\tthis.camera.dimensions.result.height = maxHeight;\n\n\t\t// Initialize face dimensions\n\t\tthis.face.video = this._getCenterAndRadius(maxHeight, maxWidth);\n\n\t\tthis._changeDetectorRef.markForCheck();\n\t}\n\n\tprivate _startNgxVideoInterval(): void {\n\t\tif (this._intervals.checkNgxVideo) {\n\t\t\tclearInterval(this._intervals.checkNgxVideo);\n\n\t\t\tthis._intervals.checkNgxVideo = null;\n\t\t}\n\n\t\tthis._intervals.checkNgxVideo = setInterval(this._checkVideoStreamReady, 100);\n\t}\n\n\tprivate _checkVideoStreamReady = () => {\n\t\tconst videoNgx = this.webcamRef?.nativeVideoElement;\n\n\t\tif (!videoNgx) return;\n\n\t\tclearInterval(this._intervals.checkNgxVideo);\n\n\t\tthis._intervals.checkNgxVideo = null;\n\n\t\tvideoNgx.addEventListener(\n\t\t\t\"loadeddata\",\n\t\t\t() => {\n\t\t\t\tthis._startFaceDetectionInterval();\n\t\t\t\tthis.canNavigate.emit(true);\n\n\t\t\t\tthis._setVideoDimensions(videoNgx);\n\t\t\t\tthis._drawOvalCenterAndMask();\n\t\t\t},\n\t\t\t{ once: true }\n\t\t);\n\n\t\tthis._setVideoDimensions(videoNgx);\n\t\tthis._drawOvalCenterAndMask();\n\t};\n\n\tprivate _setVideoDimensions(videoElement: HTMLVideoElement) {\n\t\tconst actualWidth = videoElement.clientWidth;\n\t\tconst actualHeight = videoElement.clientHeight;\n\n\t\tthis.camera.dimensions.video.height = actualHeight;\n\t\tthis.camera.dimensions.video.width = actualWidth;\n\t\tthis.camera.dimensions.result = { height: 0, width: 0, offsetX: 0, offsetY: 0 };\n\n\t\tthis._setResultDimensions(\"result\", actualHeight, actualWidth);\n\n\t\tthis.face.video = this._getCenterAndRadius(actualHeight, actualWidth);\n\n\t\tconst maskResultCanvas = this.maskResultCanvasRef?.nativeElement;\n\n\t\tif (maskResultCanvas) {\n\t\t\tmaskResultCanvas.style.marginLeft = `0px`;\n\t\t\tmaskResultCanvas.style.marginTop = `0px`;\n\t\t}\n\n\t\tthis._changeDetectorRef.markForCheck();\n\t}\n\n\tprivate _getCenterAndRadius(\n\t\theight: number,\n\t\twidth: number\n\t): { center: { x: number; y: number }; radius: { x: number; y: number }; margin: { x: number; y: number } } {\n\t\tconst center = {\n\t\t\tx: width / 2,\n\t\t\ty: height / 2,\n\t\t};\n\n\t\tconst margin = {\n\t\t\ty: height * 0.05,\n\t\t\tx: 0,\n\t\t};\n\n\t\tmargin.x = margin.y * 0.8;\n\n\t\tconst radius = {\n\t\t\ty: height * 0.42,\n\t\t\tx: 0,\n\t\t};\n\n\t\tradius.x = radius.y * this.aspectRatio;\n\n\t\tif (radius.x * 2 >= width) {\n\t\t\tradius.x = width * 0.48;\n\t\t\tradius.y = radius.x / this.aspectRatio;\n\t\t}\n\n\t\treturn { center, radius, margin };\n\t}\n\n\tprivate _setResultDimensions(type: string, height: number, width: number): void {\n\t\tconst dimensions = this.camera.dimensions[type as keyof typeof this.camera.dimensions] as any;\n\t\tif (!dimensions) return;\n\n\t\tdimensions.height = height;\n\t\tdimensions.offsetY = 0;\n\t\tdimensions.width = Math.min(2.8 * (this.face.real?.radius?.x || 0), width);\n\t\tdimensions.offsetX = (this.face.real?.center?.x || 0) - dimensions.width / 2;\n\t}\n\n\tprivate _drawOvalCenterAndMask(): void {\n\t\tconst maskResultCanvas = this.maskResultCanvasRef?.nativeElement;\n\t\tif (!maskResultCanvas) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst ctx = maskResultCanvas.getContext(\"2d\");\n\t\tif (!ctx) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst videoDim = this.camera.dimensions.video;\n\t\tif (!videoDim.width || !videoDim.height) {\n\t\t\treturn;\n\t\t}\n\t\tmaskResultCanvas.width = videoDim.width;\n\t\tmaskResultCanvas.height = videoDim.height;\n\n\t\tconst { center, radius } = this.face.video || { center: { x: 0, y: 0 }, radius: { x: 0, y: 0 } };\n\n\t\tctx.clearRect(0, 0, maskResultCanvas.width, maskResultCanvas.height);\n\n\t\tctx.fillStyle = \"rgba(255, 255, 255, 0.75)\";\n\t\tctx.fillRect(0, 0, maskResultCanvas.width, maskResultCanvas.height);\n\n\t\tctx.globalCompositeOperation = \"destination-out\";\n\n\t\tctx.fillStyle = \"rgba(255, 255, 255, 1)\";\n\t\tctx.beginPath();\n\t\tctx.ellipse(center.x, center.y, radius.x, radius.y, 0, 0, 2 * Math.PI);\n\t\tctx.fill();\n\t\tctx.closePath();\n\n\t\tctx.globalCompositeOperation = \"source-over\";\n\t}\n\n\tprivate _drawStatusOval(ctx: any, isOk: boolean): void {\n\t\tconst { center, radius } = this.face.video || { center: { x: 0, y: 0 }, radius: { x: 0, y: 0 } };\n\n\t\tctx.beginPath();\n\t\tctx.ellipse(center.x, center.y, radius.x, radius.y, 0, 0, 2 * Math.PI);\n\t\tctx.lineWidth = 5;\n\t\tctx.strokeStyle = isOk ? \"green\" : \"red\";\n\t\tctx.stroke();\n\t\tctx.closePath();\n\t}\n\n\tprivate _inRange(value: number, min: number, max: number): boolean {\n\t\treturn value >= min && value <= max;\n\t}\n\n\tprivate _isFaceCentered(nose: any): void {\n\t\tconst faceCenterX = nose.x;\n\t\tconst faceCenterY = nose.y;\n\n\t\tconst { center, margin } = this.face.real || { center: { x: 0, y: 0 }, margin: { x: 0, y: 0 } };\n\n\t\tconst inRangeX = this._inRange(faceCenterX, center.x - margin.x, center.x + margin.x);\n\t\tconst inRangeY = this._inRange(faceCenterY, center.y, center.y + margin.y * 2.5);\n\n\t\tconst isFaceCentered = inRangeX && inRangeY;\n\n\t\tif (isFaceCentered) return;\n\n\t\tlet direction = \"\";\n\n\t\tif (!inRangeX) direction += `${faceCenterX < center.x - margin.x ? \"←\" : \"→\"}`;\n\t\tif (!inRangeY) direction += `${faceCenterY < center.y ? \"↓\" : \"↑\"}`;\n\n\t\tthis.errorFace = {\n\t\t\tcanvas: direction,\n\t\t\tsubtitle: \"Center your face in the oval\",\n\t\t\ttitle: \"Center your face\",\n\t\t};\n\t}\n\n\tprivate _isFaceClose(landmarks: any): void {\n\t\tconst realDim = this.camera.dimensions.real || { height: 0, width: 0 };\n\t\tconst totalFaceArea = landmarks.imageHeight * landmarks.imageWidth;\n\t\tconst totalImageArea = realDim.height * realDim.width;\n\t\tconst faceProportion = totalFaceArea / totalImageArea;\n\n\t\tif (faceProportion < this.face.threshold || landmarks.imageHeight < this.face.minPixels || landmarks.imageWidth < this.face.minPixels) {\n\t\t\tthis.errorFace = {\n\t\t\t\ttitle: \"Get closer\",\n\t\t\t\tsubtitle: \"Move your face closer to the camera\",\n\t\t\t};\n\t\t}\n\t}\n\n\tprivate _startFaceDetectionInterval(): void {\n\t\tif (this._intervals.detectFace) {\n\t\t\tclearInterval(this._intervals.detectFace);\n\t\t\tthis._intervals.detectFace = null;\n\t\t}\n\n\t\tthis._intervals.detectFace = setInterval(() => {\n\t\t\tthis._detectFace();\n\t\t}, 100);\n\t}\n\n\tprivate async _detectFace(): Promise<void> {\n\t\tconst videoNgx = this.webcamRef?.nativeVideoElement;\n\t\tif (!videoNgx || this.response.base64Image) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst detection = await faceapi.detectAllFaces(videoNgx, new faceapi.SsdMobilenetv1Options({ minConfidence: 0.2 })).withFaceLandmarks();\n\n\t\t\tconst context = this.maskResultCanvasRef?.nativeElement.getContext(\"2d\", { willReadFrequently: true });\n\t\t\tif (!context) return;\n\n\t\t\t// Always redraw the base oval mask first\n\t\t\tthis._drawOvalCenterAndMask();\n\n\t\t\tif (detection.length > 0) {\n\t\t\t\tthis.lastFace = detection[0];\n\t\t\t\tthis.errorFace = null;\n\n\t\t\t\t// Set real dimensions for face positioning calculations\n\t\t\t\tthis.camera.dimensions.real = {\n\t\t\t\t\theight: videoNgx.videoHeight,\n\t\t\t\t\twidth: videoNgx.videoWidth,\n\t\t\t\t\toffsetX: 0,\n\t\t\t\t\toffsetY: 0,\n\t\t\t\t};\n\t\t\t\tthis.face.real = this._getCenterAndRadius(videoNgx.videoHeight, videoNgx.videoWidth);\n\n\t\t\t\t// Check face positioning\n\t\t\t\tthis._isFaceCentered(this.lastFace.landmarks.getNose()[3]);\n\t\t\t\tthis._isFaceClose(this.lastFace.landmarks);\n\n\t\t\t\t// Draw status oval (green if no errors, red if errors)\n\t\t\t\tthis._drawStatusOval(context, !this.errorFace);\n\n\t\t\t\tif (!this.errorFace) {\n\t\t\t\t\t++this.face.successPosition;\n\t\t\t\t} else {\n\t\t\t\t\tthis.face.successPosition = 0;\n\t\t\t\t}\n\n\t\t\t\tif (this.face.successPosition > 2) {\n\t\t\t\t\t// Capture after 3 successful frames\n\t\t\t\t\tthis.face.successPosition = 0;\n\t\t\t\t\tthis._takePicture.next(); // Trigger image capture\n\t\t\t\t\tclearInterval(this._intervals.detectFace); // Stop detection after capture\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.face.successPosition = 0;\n\t\t\t\tthis.errorFace = {\n\t\t\t\t\ttitle: \"No face detected\",\n\t\t\t\t\tsubtitle: \"Please look at the camera\",\n\t\t\t\t};\n\t\t\t\t// Draw red oval if no face detected\n\t\t\t\tthis._drawStatusOval(context, false);\n\t\t\t}\n\n\t\t\tthis._changeDetectorRef.markForCheck();\n\t\t} catch (error: any) {\n\t\t\tconsole.error(\"Face detection error:\", error);\n\t\t\tthis.error.emit(error);\n\t\t\tconst context = this.maskResultCanvasRef?.nativeElement.getContext(\"2d\");\n\t\t\tif (context) this._drawStatusOval(context, false);\n\t\t}\n\t}\n\n\tprivate _setImageOnCanvas(canvas: HTMLCanvasElement, img: HTMLImageElement, dimensions: any, resultDimensions: any): void {\n\t\tconst context = canvas.getContext(\"2d\");\n\t\tif (!context) return;\n\n\t\tcanvas.width = resultDimensions.width;\n\t\tcanvas.height = resultDimensions.height;\n\n\t\tcontext.drawImage(\n\t\t\timg,\n\t\t\tdimensions.offsetX,\n\t\t\tdimensions.offsetY,\n\t\t\tdimensions.width,\n\t\t\tdimensions.height,\n\t\t\t0,\n\t\t\t0,\n\t\t\tresultDimensions.width,\n\t\t\tresultDimensions.height\n\t\t);\n\t}\n\n\tprivate _takePictureLiveness(img: HTMLImageElement): void {\n\t\tconst maskResultCanvas = this.maskResultCanvasRef?.nativeElement;\n\t\tconst toSendCanvas = this.ToSendCanvasRef?.nativeElement;\n\n\t\tif (!maskResultCanvas || !toSendCanvas) return;\n\n\t\tif (!this.camera.dimensions.real || !this.camera.dimensions.result) {\n\t\t\tconsole.error(\"Camera dimensions not properly initialized\");\n\t\t\treturn;\n\t\t}\n\n\t\tthis._setImageOnCanvas(maskResultCanvas, img, this.camera.dimensions.real, this.camera.dimensions.result);\n\t\tthis._setImageOnCanvas(toSendCanvas, img, this.camera.dimensions.real, this.camera.dimensions.real);\n\n\t\tthis.response.base64Image = toSendCanvas.toDataURL(\"image/jpeg\");\n\t\tthis.response.isLoading = true;\n\n\t\tthis._emitBiometricCapture();\n\t}\n\n\tprivate async _emitBiometricCapture(): Promise<void> {\n\t\ttry {\n\t\t\tconst base64Data = this.response.base64Image.split(\",\")[1];\n\n\t\t\tif (this.isDecryptMode) {\n\t\t\t\t// In decrypt mode, emit the biometric data to the parent component\n\t\t\t\tthis.onBiometricsSuccess(base64Data);\n\t\t\t} else {\n\t\t\t\t// In create mode, store the data based on category\n\t\t\t\tawait this._storeDataByCategory(base64Data);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error in biometric capture:\", error);\n\t\t\tthis.error.emit(error);\n\t\t}\n\t}\n\n\tprivate async _storeDataByCategory(faceBase64: string): Promise<void> {\n\t\ttry {\n\t\t\tlet response: any;\n\n\t\t\t// Get the correct data source based on data type\n\t\t\tconst dataSource = this._getDataSource();\n\n\t\t\t// Safety check: Ensure we have data before proceeding\n\t\t\tif (!dataSource || Object.keys(dataSource).length === 0) {\n\t\t\t\tthrow new Error(`No data available for ${this.dataType}. Cannot proceed with storage.`);\n\t\t\t}\n\n\t\t\tswitch (this.dataType) {\n\t\t\t\tcase \"notes\":\n\t\t\t\t\t// Store note data\n\t\t\t\t\tconst notePayload = {\n\t\t\t\t\t\ttitle: dataSource.title,\n\t\t\t\t\t\tkeyValuePairs: dataSource.keyValuePairs,\n\t\t\t\t\t\tfolder: dataSource.folder,\n\t\t\t\t\t\tinsideFolder: dataSource.insideFolder,\n\t\t\t\t\t\tfaceBase64: faceBase64,\n\t\t\t\t\t\t...(this.useMasterPassword && this.masterPassword && { password: this.masterPassword }), // Optional password\n\t\t\t\t\t};\n\n\t\t\t\t\tresponse = await this._httpWrapperService.sendRequest(\"post\", `${environment.keysApiUrl}/api/zelf-key/store/notes`, notePayload, {\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\tAuthorization: `Bearer ${this.apiKeysSessionJWT}`,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"passwords\":\n\t\t\t\t\t// Store password data\n\t\t\t\t\tconst passwordPayload = {\n\t\t\t\t\t\twebsite: dataSource.url,\n\t\t\t\t\t\tusername: dataSource.email,\n\t\t\t\t\t\tpassword: dataSource.password,\n\t\t\t\t\t\tnotes: dataSource.notes,\n\t\t\t\t\t\tname: dataSource.title,\n\t\t\t\t\t\tfaceBase64: faceBase64,\n\t\t\t\t\t\t...(this.useMasterPassword && this.masterPassword && { masterPassword: this.masterPassword }), // Optional master password\n\t\t\t\t\t};\n\n\t\t\t\t\tresponse = await this._httpWrapperService.sendRequest(\n\t\t\t\t\t\t\"post\",\n\t\t\t\t\t\t`${environment.keysApiUrl}/api/zelf-key/store/password`,\n\t\t\t\t\t\tpasswordPayload,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\tAuthorization: `Bearer ${this.apiKeysSessionJWT}`,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"addresses\":\n\t\t\t\t\t// Store address data\n\t\t\t\t\tconst addressPayload = {\n\t\t\t\t\t\ttitle: dataSource.title,\n\t\t\t\t\t\taddress: dataSource.address,\n\t\t\t\t\t\tcity: dataSource.city,\n\t\t\t\t\t\tstate: dataSource.state,\n\t\t\t\t\t\tzipCode: dataSource.zipCode,\n\t\t\t\t\t\tcountry: dataSource.country,\n\t\t\t\t\t\tfaceBase64: faceBase64,\n\t\t\t\t\t};\n\n\t\t\t\t\tresponse = await this._httpWrapperService.sendRequest(\n\t\t\t\t\t\t\"post\",\n\t\t\t\t\t\t`${environment.keysApiUrl}/api/zelf-key/store/addresses`,\n\t\t\t\t\t\taddressPayload,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\tAuthorization: `Bearer ${this.apiKeysSessionJWT}`,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"payment-cards\":\n\t\t\t\t\t// Store payment card data\n\t\t\t\t\tconst cardPayload = {\n\t\t\t\t\t\ttitle: dataSource.title,\n\t\t\t\t\t\tcardNumber: dataSource.cardNumber,\n\t\t\t\t\t\texpiryDate: dataSource.expiryDate,\n\t\t\t\t\t\tcvv: dataSource.cvv,\n\t\t\t\t\t\tcardholderName: dataSource.cardholderName,\n\t\t\t\t\t\tfaceBase64: faceBase64,\n\t\t\t\t\t};\n\n\t\t\t\t\tresponse = await this._httpWrapperService.sendRequest(\n\t\t\t\t\t\t\"post\",\n\t\t\t\t\t\t`${environment.keysApiUrl}/api/zelf-key/store/payment-cards`,\n\t\t\t\t\t\tcardPayload,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\tAuthorization: `Bearer ${this.apiKeysSessionJWT}`,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"bank-accounts\":\n\t\t\t\t\t// Store bank account data\n\t\t\t\t\tconst accountPayload = {\n\t\t\t\t\t\ttitle: dataSource.title,\n\t\t\t\t\t\taccountNumber: dataSource.accountNumber,\n\t\t\t\t\t\troutingNumber: dataSource.routingNumber,\n\t\t\t\t\t\tbankName: dataSource.bankName,\n\t\t\t\t\t\taccountType: dataSource.accountType,\n\t\t\t\t\t\tfaceBase64: faceBase64,\n\t\t\t\t\t};\n\n\t\t\t\t\tresponse = await this._httpWrapperService.sendRequest(\n\t\t\t\t\t\t\"post\",\n\t\t\t\t\t\t`${environment.keysApiUrl}/api/zelf-key/store/bank-accounts`,\n\t\t\t\t\t\taccountPayload,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\tAuthorization: `Bearer ${this.apiKeysSessionJWT}`,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error(`Unsupported data type: ${this.dataType}`);\n\t\t\t}\n\n\t\t\tthis.imageCaptured.emit(this.response.base64Image);\n\n\t\t\t// Store the API result in the service\n\t\t\tawait this.dataPassingService.storeResult(this.dataType, response);\n\n\t\t\t// Navigate to result page based on category\n\t\t\tthis._navigateToResult(response);\n\t\t} catch (error) {\n\t\t\tconsole.error(`Error storing ${this.dataType} data:`, error);\n\t\t\tthis.error.emit(error);\n\t\t}\n\t}\n\n\tprivate _navigateToResult(apiResponse?: any): void {\n\t\t// Get the correct data source for navigation\n\t\tconst dataSource = this._getDataSource();\n\n\t\t// Switch case for different categories\n\t\tswitch (this.dataType) {\n\t\t\tcase \"notes\":\n\t\t\t\tthis._router.navigate([\"/dashboard/notes/result\"], {\n\t\t\t\t\tqueryParams: {\n\t\t\t\t\t\tresult: encodeURIComponent(\n\t\t\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\t\t\tsuccess: true,\n\t\t\t\t\t\t\t\tmessage: \"Note stored successfully\",\n\t\t\t\t\t\t\t\tpublicData: {\n\t\t\t\t\t\t\t\t\ttitle: dataSource.title,\n\t\t\t\t\t\t\t\t\ttype: \"notes\",\n\t\t\t\t\t\t\t\t\ttimestamp: new Date().toISOString(),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tzelfProof: apiResponse?.data?.zelfProof || \"sample_proof_string\",\n\t\t\t\t\t\t\t\tzelfQR: apiResponse?.data?.zelfQR || \"data:image/png;base64,sample_qr_code\",\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"passwords\":\n\t\t\t\tthis._router.navigate([\"/dashboard/passwords/result\"], {\n\t\t\t\t\tqueryParams: {\n\t\t\t\t\t\tresult: encodeURIComponent(\n\t\t\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\t\t\tsuccess: true,\n\t\t\t\t\t\t\t\tmessage: \"Password stored successfully\",\n\t\t\t\t\t\t\t\tpublicData: {\n\t\t\t\t\t\t\t\t\ttitle: dataSource.title,\n\t\t\t\t\t\t\t\t\ttype: \"password\",\n\t\t\t\t\t\t\t\t\ttimestamp: new Date().toISOString(),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tzelfProof: apiResponse?.data?.zelfProof || \"sample_proof_string\",\n\t\t\t\t\t\t\t\tzelfQR: apiResponse?.data?.zelfQR || \"data:image/png;base64,sample_qr_code\",\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"addresses\":\n\t\t\t\tthis._router.navigate([\"/dashboard/addresses/result\"], {\n\t\t\t\t\tqueryParams: {\n\t\t\t\t\t\tresult: encodeURIComponent(\n\t\t\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\t\t\tsuccess: true,\n\t\t\t\t\t\t\t\tmessage: \"Address stored successfully\",\n\t\t\t\t\t\t\t\tpublicData: {\n\t\t\t\t\t\t\t\t\ttitle: dataSource.title,\n\t\t\t\t\t\t\t\t\ttype: \"address\",\n\t\t\t\t\t\t\t\t\ttimestamp: new Date().toISOString(),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tzelfProof: apiResponse?.data?.zelfProof || \"sample_proof_string\",\n\t\t\t\t\t\t\t\tzelfQR: apiResponse?.data?.zelfQR || \"data:image/png;base64,sample_qr_code\",\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"payment-cards\":\n\t\t\t\tthis._router.navigate([\"/dashboard/payment-cards/result\"], {\n\t\t\t\t\tqueryParams: {\n\t\t\t\t\t\tresult: encodeURIComponent(\n\t\t\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\t\t\tsuccess: true,\n\t\t\t\t\t\t\t\tmessage: \"Payment card stored successfully\",\n\t\t\t\t\t\t\t\tpublicData: {\n\t\t\t\t\t\t\t\t\ttitle: dataSource.title,\n\t\t\t\t\t\t\t\t\ttype: \"payment-card\",\n\t\t\t\t\t\t\t\t\ttimestamp: new Date().toISOString(),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tzelfProof: apiResponse?.data?.zelfProof || \"sample_proof_string\",\n\t\t\t\t\t\t\t\tzelfQR: apiResponse?.data?.zelfQR || \"data:image/png;base64,sample_qr_code\",\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"bank-accounts\":\n\t\t\t\tthis._router.navigate([\"/dashboard/bank-accounts/result\"], {\n\t\t\t\t\tqueryParams: {\n\t\t\t\t\t\tresult: encodeURIComponent(\n\t\t\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\t\t\tsuccess: true,\n\t\t\t\t\t\t\t\tmessage: \"Bank account stored successfully\",\n\t\t\t\t\t\t\t\tpublicData: {\n\t\t\t\t\t\t\t\t\ttitle: dataSource.title,\n\t\t\t\t\t\t\t\t\ttype: \"bank-account\",\n\t\t\t\t\t\t\t\t\ttimestamp: new Date().toISOString(),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tzelfProof: apiResponse?.data?.zelfProof || \"sample_proof_string\",\n\t\t\t\t\t\t\t\tzelfQR: apiResponse?.data?.zelfQR || \"data:image/png;base64,sample_qr_code\",\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\t// Fallback to dashboard\n\t\t\t\tthis._router.navigate([\"/dashboard\"]);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tcameraError(error: WebcamInitError): void {\n\t\tconsole.error(\"Camera error:\", error);\n\t\tthis.canNavigate.emit(true);\n\t\tthis.error.emit(error);\n\n\t\tif (!error.mediaStreamError || error.mediaStreamError.name !== \"NotAllowedError\") return;\n\n\t\tthis.camera.hasPermissions = false;\n\t}\n\n\tprocessImage(webcamImage: WebcamImage): void {\n\t\tif (this.response.base64Image) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst img = new Image();\n\t\timg.src = webcamImage.imageAsDataUrl;\n\n\t\timg.onload = async () => {\n\t\t\tif (img.height < this.face.minHeight) {\n\t\t\t\tthis.camera.isLowQuality = true;\n\t\t\t\tthis.canNavigate.emit(true);\n\t\t\t\tthis.error.emit({ error: \"low_quality\" });\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// This is for capturing the final image after successful liveness detection\n\t\t\tthis._takePictureLiveness(img);\n\t\t};\n\t}\n\n\tonBack(): void {\n\t\tif (this.isDecryptMode) {\n\t\t\t// In decrypt mode, emit cancel event\n\t\t\tthis.onBiometricsCancel();\n\t\t} else {\n\t\t\t// In create mode, navigate back to form based on category\n\t\t\tthis._navigateBackToForm();\n\t\t}\n\t}\n\n\tprivate _navigateBackToForm(): void {\n\t\t// Get the correct data source for navigation back\n\t\tconst dataSource = this._getDataSource();\n\n\t\t// Switch case for different categories\n\t\tswitch (this.dataType) {\n\t\t\tcase \"notes\":\n\t\t\t\tthis._router.navigate([\"/dashboard/notes/new\"], {\n\t\t\t\t\tqueryParams: { noteData: encodeURIComponent(JSON.stringify(dataSource)) },\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"passwords\":\n\t\t\t\tthis._router.navigate([\"/dashboard/passwords/new\"], {\n\t\t\t\t\tqueryParams: { passwordData: encodeURIComponent(JSON.stringify(dataSource)) },\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"addresses\":\n\t\t\t\tthis._router.navigate([\"/dashboard/addresses/new\"], {\n\t\t\t\t\tqueryParams: { addressData: encodeURIComponent(JSON.stringify(dataSource)) },\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"payment-cards\":\n\t\t\t\tthis._router.navigate([\"/dashboard/payment-cards/new\"], {\n\t\t\t\t\tqueryParams: { cardData: encodeURIComponent(JSON.stringify(dataSource)) },\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"bank-accounts\":\n\t\t\t\tthis._router.navigate([\"/dashboard/bank-accounts/new\"], {\n\t\t\t\t\tqueryParams: { accountData: encodeURIComponent(JSON.stringify(dataSource)) },\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\t// Fallback to dashboard\n\t\t\t\tthis._router.navigate([\"/dashboard\"]);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * Get the correct data source based on data type\n\t */\n\tprivate _getDataSource(): any {\n\t\t// All data now comes from itemData (populated from service)\n\t\treturn this.itemData;\n\t}\n\n\t// Helper methods for UI\n\tgetDataTypeIcon(): string {\n\t\tswitch (this.dataType) {\n\t\t\tcase \"passwords\":\n\t\t\t\treturn \"🔐\";\n\t\t\tcase \"notes\":\n\t\t\t\treturn \"📝\";\n\t\t\tcase \"addresses\":\n\t\t\t\treturn \"📍\";\n\t\t\tcase \"payment-cards\":\n\t\t\t\treturn \"💳\";\n\t\t\tcase \"bank-accounts\":\n\t\t\t\treturn \"🏦\";\n\t\t\tdefault:\n\t\t\t\treturn \"📄\";\n\t\t}\n\t}\n\n\tgetDataTypeTitle(): string {\n\t\treturn this.dataTitle;\n\t}\n}\n","<div class=\"data-biometrics-container\">\n\t<div class=\"biometrics-header\">\n\t\t<button class=\"btn-back\" (click)=\"onBack()\">\n\t\t\t<svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\">\n\t\t\t\t<path d=\"M15 10H5M5 10L10 15M5 10L10 5\" stroke=\"#171717\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" />\n\t\t\t</svg>\n\t\t\t<span>{{ isDecryptMode ? \"Back to \" + getDataTypeTitle() + \" Details\" : \"Back to \" + getDataTypeTitle() + \" Form\" }}</span>\n\t\t</button>\n\n\t\t<h1 class=\"biometrics-title\">{{ isDecryptMode ? \"Verify Identity to Decrypt\" : \"Biometric Verification\" }}</h1>\n\t</div>\n\n\t<div class=\"biometrics-content\" fxLayout=\"column\" fxLayoutAlign=\"center center\">\n\t\t<div\n\t\t\t*ngIf=\"!camera.isLoading && camera.hasPermissions && !camera.isLowQuality\"\n\t\t\tclass=\"camera-container\"\n\t\t\tfxLayout=\"column\"\n\t\t\tfxLayoutAlign=\"center center\"\n\t\t>\n\t\t\t<!-- Camera View - Much Larger Now -->\n\t\t\t<div class=\"camera-view\" [style.width.px]=\"camera.dimensions.video.width\" [style.height.px]=\"camera.dimensions.video.height\">\n\t\t\t\t<webcam\n\t\t\t\t\t(imageCapture)=\"processImage($event)\"\n\t\t\t\t\t(initError)=\"cameraError($event)\"\n\t\t\t\t\t[allowCameraSwitch]=\"false\"\n\t\t\t\t\t[captureImageData]=\"true\"\n\t\t\t\t\t[height]=\"camera.dimensions.video.height\"\n\t\t\t\t\t[imageQuality]=\"1\"\n\t\t\t\t\t[trigger]=\"takePicture$\"\n\t\t\t\t\t[videoOptions]=\"camera.configuration\"\n\t\t\t\t\t[width]=\"camera.dimensions.video.width\"\n\t\t\t\t\t*ngIf=\"!response.base64Image\"\n\t\t\t\t\t#webcam\n\t\t\t\t\tmirrorImage=\"always\"\n\t\t\t\t></webcam>\n\n\t\t\t\t<canvas\n\t\t\t\t\t[style.height.px]=\"response.base64Image ? camera.dimensions.result.height : camera.dimensions.video.height\"\n\t\t\t\t\t[style.width.px]=\"response.base64Image ? camera.dimensions.result.width : camera.dimensions.video.width\"\n\t\t\t\t\t#maskResult\n\t\t\t\t\tclass=\"face-mask-canvas\"\n\t\t\t\t></canvas>\n\n\t\t\t\t<canvas #toSend hidden=\"true\"></canvas>\n\t\t\t</div>\n\n\t\t\t<!-- Status Messages - Positioned Below Camera -->\n\t\t\t<div class=\"status-messages\" fxLayout=\"column\" fxLayoutAlign=\"center center\">\n\t\t\t\t<div *ngIf=\"errorFace && !response.isLoading\" class=\"biometric__error\">\n\t\t\t\t\t<div class=\"biometric__error-title\">{{ errorFace.title }}</div>\n\t\t\t\t\t<div class=\"biometric__error-subtitle\">{{ errorFace.subtitle }}</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div *ngIf=\"!errorFace && !response.isLoading\" class=\"biometric__instructions\">\n\t\t\t\t\t<div class=\"biometric__instruction-title\">Position your face in the center</div>\n\t\t\t\t\t<div class=\"biometric__instruction-subtitle\">Look directly at the camera and stay still</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<!-- Instructions - Compact and Strategic -->\n\t\t\t<div class=\"compact-instructions\">\n\t\t\t\t<p *ngIf=\"!isDecryptMode\">\n\t\t\t\t\tPlease look at the camera to verify your identity and store your {{ getDataTypeTitle().toLowerCase() }} securely\n\t\t\t\t</p>\n\t\t\t\t<p *ngIf=\"isDecryptMode\">Please look at the camera to verify your identity and decrypt your {{ getDataTypeTitle().toLowerCase() }}</p>\n\t\t\t</div>\n\n\t\t\t<!-- Optional Master Password Input -->\n\t\t\t<div class=\"password-input-container\">\n\t\t\t\t<div class=\"password-toggle\">\n\t\t\t\t\t<label class=\"form-label\">Add Master Password (Optional)</label>\n\t\t\t\t\t<div class=\"toggle-switch\" (click)=\"toggleMasterPassword()\">\n\t\t\t\t\t\t<div class=\"toggle-slider\" [class.active]=\"useMasterPassword\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div *ngIf=\"useMasterPassword\" class=\"password-input-field\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tid=\"masterPassword\"\n\t\t\t\t\t\tplaceholder=\"Enter your master password (optional)\"\n\t\t\t\t\t\t[(ngModel)]=\"masterPassword\"\n\t\t\t\t\t\tclass=\"password-input\"\n\t\t\t\t\t/>\n\t\t\t\t\t<small>Adding a master password provides additional security layer. Biometric verification is always required.</small>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"loading-container\" fxLayout=\"column\" fxLayoutAlign=\"center center\" *ngIf=\"response.base64Image || camera.isLoading\">\n\t\t\t<zelf-loader [diameter]=\"120\"></zelf-loader>\n\t\t\t<div *ngIf=\"response.isLoading\" class=\"processing-message\">Processing your biometric data...</div>\n\t\t</div>\n\n\t\t<div class=\"error-container\" fxLayout=\"column\" fxLayoutAlign=\"center center\" *ngIf=\"!camera.isLoading && camera.isLowQuality\">\n\t\t\t<img src=\"https://cdn.verifik.co/demo/nocameraenabled.svg\" alt=\"Camera Error\" class=\"camera-error-image\" />\n\t\t\t<h2 class=\"error-title\">Camera not available</h2>\n\t\t\t<p class=\"error-description\">Please ensure your camera is enabled and accessible for biometric verification</p>\n\t\t</div>\n\n\t\t<div class=\"permission-container\" fxLayout=\"column\" fxLayoutAlign=\"center center\" *ngIf=\"!camera.isLoading && !camera.hasPermissions\">\n\t\t\t<div class=\"permission-icon\">📷</div>\n\t\t\t<h2 class=\"permission-title\">Camera Permission Required</h2>\n\t\t\t<p class=\"permission-description\">Please allow camera access to continue with biometric verification</p>\n\t\t\t<button class=\"btn-retry\" (click)=\"onBack()\">Go Back</button>\n\t\t</div>\n\t</div>\n</div>\n","import { AsyncAction } from './AsyncAction';\nimport { immediateProvider } from './immediateProvider';\nexport class AsapAction extends AsyncAction {\n    constructor(scheduler, work) {\n        super(scheduler, work);\n        this.scheduler = scheduler;\n        this.work = work;\n    }\n    requestAsyncId(scheduler, id, delay = 0) {\n        if (delay !== null && delay > 0) {\n            return super.requestAsyncId(scheduler, id, delay);\n        }\n        scheduler.actions.push(this);\n        return scheduler._scheduled || (scheduler._scheduled = immediateProvider.setImmediate(scheduler.flush.bind(scheduler, undefined)));\n    }\n    recycleAsyncId(scheduler, id, delay = 0) {\n        var _a;\n        if (delay != null ? delay > 0 : this.delay > 0) {\n            return super.recycleAsyncId(scheduler, id, delay);\n        }\n        const { actions } = scheduler;\n        if (id != null && ((_a = actions[actions.length - 1]) === null || _a === void 0 ? void 0 : _a.id) !== id) {\n            immediateProvider.clearImmediate(id);\n            if (scheduler._scheduled === id) {\n                scheduler._scheduled = undefined;\n            }\n        }\n        return undefined;\n    }\n}\n","import { AsyncScheduler } from './AsyncScheduler';\nexport class AsapScheduler extends AsyncScheduler {\n    flush(action) {\n        this._active = true;\n        const flushId = this._scheduled;\n        this._scheduled = undefined;\n        const { actions } = this;\n        let error;\n        action = action || actions.shift();\n        do {\n            if ((error = action.execute(action.state, action.delay))) {\n                break;\n            }\n        } while ((action = actions[0]) && action.id === flushId && actions.shift());\n        this._active = false;\n        if (error) {\n            while ((action = actions[0]) && action.id === flushId && actions.shift()) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    }\n}\n","import { mergeAll } from '../operators/mergeAll';\nimport { innerFrom } from './innerFrom';\nimport { EMPTY } from './empty';\nimport { popNumber, popScheduler } from '../util/args';\nimport { from } from './from';\nexport function merge(...args) {\n    const scheduler = popScheduler(args);\n    const concurrent = popNumber(args, Infinity);\n    const sources = args;\n    return !sources.length\n        ?\n            EMPTY\n        : sources.length === 1\n            ?\n                innerFrom(sources[0])\n            :\n                mergeAll(concurrent)(from(sources, scheduler));\n}\n","import { AsapAction } from './AsapAction';\nimport { AsapScheduler } from './AsapScheduler';\nexport const asapScheduler = new AsapScheduler(AsapAction);\nexport const asap = asapScheduler;\n","import { Immediate } from '../util/Immediate';\nconst { setImmediate, clearImmediate } = Immediate;\nexport const immediateProvider = {\n    setImmediate(...args) {\n        const { delegate } = immediateProvider;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.setImmediate) || setImmediate)(...args);\n    },\n    clearImmediate(handle) {\n        const { delegate } = immediateProvider;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearImmediate) || clearImmediate)(handle);\n    },\n    delegate: undefined,\n};\n"],"names":["nextHandle","resolved","activeHandles","findAndClearHandle","handle","Immediate","setImmediate","cb","Promise","resolve","then","clearImmediate","TestTools","pending","Object","keys","length","EventEmitter","CommonModule","FormsModule","TranslocoModule","RouterModule","WebcamModule","Subject","takeUntil","FlexLayoutModule","MatButtonModule","MatProgressBarModule","MatProgressSpinnerModule","ZelfLoaderComponent","environment","faceapi","i0","ɵɵelementStart","ɵɵlistener","DataBiometricsComponent_div_10_webcam_2_Template_webcam_imageCapture_0_listener","$event","ɵɵrestoreView","_r2","ctx_r2","ɵɵnextContext","ɵɵresetView","processImage","DataBiometricsComponent_div_10_webcam_2_Template_webcam_initError_0_listener","cameraError","ɵɵelementEnd","ɵɵproperty","camera","dimensions","video","height","takePicture$","configuration","width","ɵɵtext","ɵɵadvance","ɵɵtextInterpolate","errorFace","title","subtitle","ɵɵtextInterpolate1","getDataTypeTitle","toLowerCase","ɵɵtwoWayListener","DataBiometricsComponent_div_10_div_19_Template_input_ngModelChange_1_listener","_r4","ɵɵtwoWayBindingSet","masterPassword","ɵɵtwoWayProperty","ɵɵtemplate","DataBiometricsComponent_div_10_webcam_2_Template","ɵɵelement","DataBiometricsComponent_div_10_div_8_Template","DataBiometricsComponent_div_10_div_9_Template","DataBiometricsComponent_div_10_p_11_Template","DataBiometricsComponent_div_10_p_12_Template","DataBiometricsComponent_div_10_Template_div_click_17_listener","_r1","toggleMasterPassword","DataBiometricsComponent_div_10_div_19_Template","ɵɵstyleProp","response","base64Image","result","isLoading","isDecryptMode","ɵɵclassProp","useMasterPassword","DataBiometricsComponent_div_11_div_2_Template","DataBiometricsComponent_div_13_Template_button_click_7_listener","_r5","onBack","DataBiometricsComponent","_changeDetectorRef","_httpWrapperService","_mediaStreamService","_renderer","_translocoService","_walletService","_router","_route","chromeService","dataPassingService","maskResultCanvasRef","ToSendCanvasRef","webcamRef","canNavigate","error","imageCaptured","biometricsSuccess","biometricsCancel","unsubscriber$","_takePicture","_intervals","hasPermissions","isLowQuality","max","offsetX","offsetY","real","facingMode","ideal","face","center","x","y","radius","margin","minHeight","minPixels","successPosition","threshold","apiKeysSessionJWT","lastFace","itemData","aspectRatio","dataType","dataTitle","constructor","ngOnInit","_this","_asyncToGenerator","currentPath","url","includes","isExtension","ensureFullScreen","_getDataFromService","initZelfKeySession","_initializeBiometrics","serviceData","getData","ngOnDestroy","detectFace","clearInterval","checkNgxVideo","next","complete","asObservable","_this2","jwt","getZelfKeyJWT","onBiometricsSuccess","faceBase64","password","emit","onBiometricsCancel","_this3","faceapi$","pipe","subscribe","_ref","isLoaded","_setMaxVideoDimensions","_startNgxVideoInterval","_x","apply","arguments","console","_this4","maxWidth","maxHeight","_getCenterAndRadius","markForCheck","setInterval","_checkVideoStreamReady","videoNgx","nativeVideoElement","addEventListener","_startFaceDetectionInterval","_setVideoDimensions","_drawOvalCenterAndMask","once","videoElement","actualWidth","clientWidth","actualHeight","clientHeight","_setResultDimensions","maskResultCanvas","nativeElement","style","marginLeft","marginTop","type","Math","min","ctx","getContext","videoDim","clearRect","fillStyle","fillRect","globalCompositeOperation","beginPath","ellipse","PI","fill","closePath","_drawStatusOval","isOk","lineWidth","strokeStyle","stroke","_inRange","value","_isFaceCentered","nose","faceCenterX","faceCenterY","inRangeX","inRangeY","isFaceCentered","direction","canvas","_isFaceClose","landmarks","realDim","totalFaceArea","imageHeight","imageWidth","totalImageArea","faceProportion","_detectFace","_this5","detection","detectAllFaces","SsdMobilenetv1Options","minConfidence","withFaceLandmarks","context","willReadFrequently","videoHeight","videoWidth","getNose","_setImageOnCanvas","img","resultDimensions","drawImage","_takePictureLiveness","toSendCanvas","toDataURL","_emitBiometricCapture","_this6","base64Data","split","_storeDataByCategory","_this7","dataSource","_getDataSource","Error","notePayload","keyValuePairs","folder","insideFolder","sendRequest","keysApiUrl","headers","Authorization","passwordPayload","website","username","email","notes","name","addressPayload","address","city","state","zipCode","country","cardPayload","cardNumber","expiryDate","cvv","cardholderName","accountPayload","accountNumber","routingNumber","bankName","accountType","storeResult","_navigateToResult","apiResponse","navigate","queryParams","encodeURIComponent","JSON","stringify","success","message","publicData","timestamp","Date","toISOString","zelfProof","data","zelfQR","mediaStreamError","webcamImage","_this8","Image","src","imageAsDataUrl","onload","_navigateBackToForm","noteData","passwordData","addressData","cardData","accountData","getDataTypeIcon","ɵɵdirectiveInject","ChangeDetectorRef","i1","HttpWrapperService","i2","MediaStreamService","Renderer2","i3","TranslocoService","i4","WalletService","i5","Router","ActivatedRoute","i6","ChromeService","i7","DataPassingService","selectors","viewQuery","DataBiometricsComponent_Query","rf","DataBiometricsComponent_Template_button_click_2_listener","DataBiometricsComponent_div_10_Template","DataBiometricsComponent_div_11_Template","DataBiometricsComponent_div_12_Template","DataBiometricsComponent_div_13_Template","i8","NgIf","i9","DefaultValueAccessor","NgControlStatus","NgModel","i10","DefaultLayoutDirective","DefaultLayoutAlignDirective","i11","WebcamComponent","styles","AsyncAction","immediateProvider","AsapAction","scheduler","work","requestAsyncId","id","delay","actions","push","_scheduled","flush","bind","undefined","recycleAsyncId","_a","AsyncScheduler","AsapScheduler","action","_active","flushId","shift","execute","unsubscribe","mergeAll","innerFrom","EMPTY","popNumber","popScheduler","from","merge","args","concurrent","Infinity","sources","asapScheduler","asap","delegate"],"sourceRoot":"webpack:///","x_google_ignoreList":[0,3,4,5,6,7]}